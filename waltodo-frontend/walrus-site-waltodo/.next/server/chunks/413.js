"use strict";exports.id=413,exports.ids=[413],exports.modules={28413:(t,e,n)=>{n.d(e,{rk:()=>x,qv:()=>A,aS:()=>N,VU:()=>O,LC:()=>T,ES:()=>D,transferTodoNFT:()=>E,CU:()=>v});var o=n(31261);let r={},a=()=>!1;function c(){return a(),!1}function i(t,e,n){return a(),[!1,null]}function l(t,e){try{let[n,o]=i("get",t);if(n&&null!==o)try{return JSON.parse(o)}catch(t){}let a=r[t];return a?JSON.parse(a):e??null}catch(t){return e??null}}function d(t,e){try{let n=JSON.stringify(e);r[t]=n;let[o]=i("set",t,e);return!0}catch(n){try{return r[t]=JSON.stringify(e),!0}catch(t){return!1}}}function s(t){try{return delete r[t],i("remove",t),!0}catch(e){return delete r[t],!0}}function u(){return!c()}var f=n(65054),p=n(29238);let g=null,h=new Map;async function b(){return g||(g=await (0,f.P3)("testnet"))||(g={network:{name:"testnet",url:"https://fullnode.testnet.sui.io",explorerUrl:"https://testnet.suiexplorer.com"},walrus:{networkUrl:"https://wal.testnet.sui.io",publisherUrl:"https://publisher-testnet.walrus.space",aggregatorUrl:"https://aggregator-testnet.walrus.space",apiPrefix:"https://api-testnet.walrus.tech/1.0"},deployment:{packageId:"0xd6f97fc85796ee23adf60504a620631a0eea6947f85c4ca51e02245e9a4b57d7",digest:"unknown",timestamp:new Date().toISOString(),deployerAddress:"0xca793690985183dc8e2180fd059d76f3b0644f5c2ecd3b01cdebe7d40b0cca39"},contracts:{todoNft:{packageId:"0xd6f97fc85796ee23adf60504a620631a0eea6947f85c4ca51e02245e9a4b57d7",moduleName:"todo_nft",structName:"TodoNFT"}},features:{aiEnabled:!1,blockchainVerification:!1,encryptedStorage:!1}}),g}let y={default:{name:"Default",todos:[{id:"1",title:"Set up blockchain wallet",completed:!1,priority:"high",tags:["setup","blockchain"],blockchainStored:!0,objectId:"0xabc123"},{id:"2",title:"Design oceanic UI components",description:"Create reusable Tailwind components with ocean theme",completed:!0,priority:"medium",tags:["design","frontend"],blockchainStored:!1},{id:"3",title:"Implement Sui blockchain connectivity",completed:!1,priority:"high",dueDate:"2023-12-01",blockchainStored:!1}]},work:{name:"Work",todos:[{id:"4",title:"Test NFT todo transfers",completed:!1,priority:"medium",tags:["testing","blockchain"],blockchainStored:!1}]},personal:{name:"Personal",todos:[]},shopping:{name:"Shopping",todos:[]}},m=({getItem:l,setItem:d,removeItem:s,clear:function(){try{return Object.keys(r).forEach(t=>delete r[t]),a(),!0}catch(t){return Object.keys(r).forEach(t=>delete r[t]),!0}},keys:function(){try{let t=Object.keys(r);return a(),t}catch(t){return Object.keys(r)}},isAvailable:c,isFallback:u,createTyped:function(t,e){return{get:()=>l(t,e),set:e=>d(t,e),clear:()=>s(t)}}}).createTyped("walrusTodoLists",{}),w={};function k(t){return t?t.toLowerCase():"anonymous"}function S(){try{m.set(w)}catch(t){console.warn("Failed to save wallet todos to storage:",t)}}function I(t){let e=k(t);return w[e]||function(){try{let t=m.get();t&&"object"==typeof t&&(w=t),u()}catch(t){console.warn("Failed to load wallet todos from storage:",t)}}(),w[e]||(w[e]={...y},S()),w[e]}function T(t,e){let n=I(e);return n[t]?.todos||[]}function x(t,e,n){let o=k(n),r=I(n);r[t]||(r[t]={name:t,todos:[]});let a={...e,id:Date.now().toString(),blockchainStored:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r[t].todos.push(a),w[o]=r,S(),a}function v(t,e,n){let o=k(n),r=I(n);if(!r[t])return!1;let a=r[t].todos.findIndex(t=>t.id===e.id);return -1!==a&&(r[t].todos[a]={...e,updatedAt:new Date().toISOString()},w[o]=r,S(),!0)}function N(t,e,n){let o=k(n),r=I(n);if(!r[t])return!1;let a=r[t].todos.length;return r[t].todos=r[t].todos.filter(t=>t.id!==e),w[o]=r,S(),r[t].todos.length!==a}function A(t,e){let n=k(e),o=I(e);return!o[t]&&(o[t]={name:t,todos:[]},w[n]=o,S(),!0)}function O(t,e){let n=k(e),o=I(e);return!!o[t]&&"default"!==t&&(delete o[t],w[n]=o,S(),!0)}async function D(t,e,n,r){let a=I(r);if(!a[t])return null;let c=a[t].todos.find(t=>t.id===e);if(!c)return null;if(!n||!n.signAndExecuteTransaction)return console.warn("No wallet signer available - running in read-only mode"),null;try{let a=await b(),i={title:c.title,description:c.description||"",priority:c.priority,tags:c.tags,dueDate:c.dueDate,createdAt:new Date().toISOString(),localId:c.id},l=await p.$4.uploadJson(i,{epochs:5}),d=new o.Y,s=new TextEncoder().encode(c.title),u=new TextEncoder().encode(c.description||""),f=new TextEncoder().encode(p.$4.getBlobUrl(l.blobId)),g=new TextEncoder().encode(JSON.stringify({priority:c.priority,tags:c.tags,dueDate:c.dueDate,walrusBlobId:l.blobId}));d.moveCall({target:`${a.deployment.packageId}::todo_nft::create_todo_nft`,arguments:[d.pure.vector("u8",Array.from(s)),d.pure.vector("u8",Array.from(u)),d.pure.vector("u8",Array.from(f)),d.pure.vector("u8",Array.from(g)),d.pure.bool(!1)]});let h=await n.signAndExecuteTransaction(d),y=h.effects?.created?.[0]?.reference?.objectId||null;return y&&function(t,e,n,o){let r=k(o),a=I(o);if(!a[t])return 0;let c=a[t].todos.findIndex(t=>t.id===e);-1!==c&&(a[t].todos[c].blockchainStored=!0,a[t].todos[c].objectId=n,w[r]=a,S())}(t,e,y,r),y}catch(t){return console.error("Failed to store todo on blockchain:",t),null}}async function E(t,e,n,r,a){let c=I(a);if(!c[t])return!1;let i=c[t].todos.find(t=>t.id===e);if(!i||!i.blockchainStored||!i.objectId)return console.error("Todo not found or not stored on blockchain"),!1;if(!r||!r.signAndExecuteTransaction)return console.warn("No wallet signer available - cannot transfer NFT"),!1;try{let c=await b(),l=new o.Y;if(l.moveCall({target:`${c.deployment.packageId}::todo_nft::transfer_todo_nft`,arguments:[l.object(i.objectId),l.pure.address(n)]}),(await r.signAndExecuteTransaction(l)).digest)return N(t,e,a),!0;return!1}catch(t){return console.error("Failed to transfer todo NFT:",t),!1}}}};