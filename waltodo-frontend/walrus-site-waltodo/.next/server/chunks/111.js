"use strict";exports.id=111,exports.ids=[111],exports.modules={31111:(e,t,s)=>{s.d(t,{Z:()=>b});var a=s(87009),o=s(926),r=s.n(o),l=s(43467),i=s(28413),d=s(11470),c=s(90193),n=s(37727),m=s(55809),x=s(64330);function u({todoId:e,imageUrl:t,imageUrls:s,showPerformanceMetrics:o=!1}){let r=e=>e.startsWith("0x")||e.includes("walrus")?`https://aggregator.walrus-testnet.walrus.space/v1/${e}`:e;if(t)return(0,a.jsxs)("div",{className:"todo-image-container",children:[a.jsx(m.dg,{src:r(t),alt:`Image for todo ${e}`,width:400,height:300,className:"rounded-lg shadow-md",priority:"high",placeholder:"blur",onLoad:()=>console.log(`Image loaded for todo ${e}`),onError:()=>console.error(`Failed to load image for todo ${e}`)}),o&&a.jsx(h,{})]});if(s&&s.length>0){let t=s.map((t,s)=>({src:r(t),alt:`Image ${s+1} for todo ${e}`,id:`${e}-${s}`}));return(0,a.jsxs)("div",{className:"todo-gallery-container",children:[a.jsx(m.em,{images:t,columns:3}),o&&a.jsx(h,{})]})}return null}function h(){let[e,t]=r().useState(new Map);return 0===e.size?null:(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Performance Metrics"}),a.jsx("div",{className:"space-y-1",children:Array.from(e.entries()).map(([e,t])=>(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"truncate max-w-xs",children:e.split("/").pop()}),(0,a.jsxs)("span",{children:[t.loadTime.toFixed(0),"ms | ",(t.size/1024).toFixed(1),"KB |",t.cached?" (cached)":""," ",t.format]})]},e))}),a.jsx("button",{onClick:()=>{(0,x.O5)(),window.location.reload()},className:"mt-2 text-xs text-blue-600 hover:text-blue-800",children:"Clear Caches"})]})}function p(){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-gray-200 border-t-blue-600 animate-spin"}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("p",{className:"text-sm text-gray-500 animate-pulse",children:"Initializing todo list..."})})]})}let b=(0,o.memo)(function({listName:e}){let[t,s]=(0,o.useState)([]),[r,m]=(0,o.useState)(!0),[x,h]=(0,o.useState)([]),[b,g]=(0,o.useState)(!1),[j,f]=(0,o.useState)(!1),[k,N]=(0,o.useState)(!1),{address:v,connected:w,signAndExecuteTransaction:y}=(0,l.tN)()||{},{isInitialized:S,isInitializing:D,error:I}=(0,c.n)("testnet"),C=(0,o.useMemo)(()=>[...t,...x].reduce((e,t)=>{let s=e.find(e=>e.objectId&&e.objectId===t.objectId);if(s){if(t.blockchainStored&&!s.blockchainStored){let a=e.indexOf(s);e[a]=t}}else e.push(t);return e},[]),[t,x]),F=(0,o.useMemo)(()=>C,[C]),$=(0,o.useCallback)(async()=>{if(j&&k&&w&&v&&S)try{let e=await (0,d.xe)(v);h(e)}catch(e){n.ZP.error("Failed to refresh blockchain todos",{duration:3e3})}},[w,v,S,j,k]),P=(0,o.useCallback)(async t=>{if(!j||!k)return;let a=F.find(e=>e.id===t);if(a){s(F.map(e=>e.id===t?{...e,completed:!e.completed,completedAt:e.completed?void 0:new Date().toISOString()}:e));try{if(a.blockchainStored&&a.objectId&&y&&S){let e=await (0,d.completeTodoOnBlockchain)(a.objectId,y,v||"");if(e.success)n.ZP.success("Todo updated on blockchain!",{duration:3e3,icon:"\uD83C\uDF89"}),await $();else throw Error(e.error||"Failed to complete todo on blockchain")}else{let t={...a,completed:!a.completed,completedAt:a.completed?void 0:new Date().toISOString()};if((0,i.CU)(e,t,v||void 0))n.ZP.success("Todo updated!",{duration:2e3});else{n.ZP.error("Failed to update todo",{duration:3e3});let t=(0,i.LC)(e,v||void 0);s(t)}}}catch(a){let t=a instanceof Error?a.message:"Failed to update todo";n.ZP.error(t,{duration:5e3}),s((0,i.LC)(e,v||void 0)),w&&v&&await $()}}},[F,y,v,$,e,w,S,j,k]),T=(0,o.useCallback)(async e=>{if(j&&k&&w&&v&&y&&S)try{(0,n.ZP)("Feature coming soon: Store existing todo as NFT on Sui blockchain",{duration:4e3,icon:"\uD83D\uDEA7"})}catch(e){n.ZP.error("Failed to store todo on blockchain",{duration:4e3})}},[w,v,y,S,j,k]),Z=(0,o.useCallback)(async e=>{if(j&&k&&confirm(`Are you sure you want to delete "${e.title}"?`))try{if(e.blockchainStored&&e.objectId&&y&&S){let t=await (0,d.deleteTodoOnBlockchain)(e.objectId,y,v||"");if(t.success)n.ZP.success("Todo deleted from blockchain!",{duration:3e3,icon:"\uD83D\uDDD1️"}),await $();else throw Error(t.error||"Failed to delete todo from blockchain")}else{let a=t.filter(t=>t.id!==e.id);s(a),n.ZP.success("Todo deleted!",{duration:2e3})}}catch(t){let e=t instanceof Error?t.message:"Failed to delete todo";n.ZP.error(e,{duration:5e3})}},[y,v,$,t,S,j,k]);return j?r||w&&D?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-ocean-light border-t-ocean-deep animate-spin"}),(0,a.jsxs)("div",{className:"mt-4 text-center",children:[!j&&a.jsx("p",{className:"text-sm text-ocean-medium animate-pulse",children:"Loading component..."}),j&&r&&a.jsx("p",{className:"text-sm text-ocean-medium animate-pulse",children:"Loading todos..."}),j&&w&&D&&a.jsx("p",{className:"text-sm text-ocean-medium animate-pulse",children:"Initializing blockchain connection..."})]})]}):j&&w&&I?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsxs)("div",{className:"text-red-500 mb-4",children:[a.jsx("p",{className:"font-medium",children:"Blockchain Connection Error"}),a.jsx("p",{className:"text-sm",children:I})]}),a.jsx("p",{className:"text-sm text-ocean-medium/70 dark:text-ocean-light/70",children:"Local todos will still work. Try refreshing to reconnect to the blockchain."})]}):0===F.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-ocean-medium dark:text-ocean-light mb-4",children:"No todos in this list yet."}),a.jsx("p",{className:"text-sm text-ocean-medium/70 dark:text-ocean-light/70",children:"Create your first todo using the form above!"}),w&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-xs text-ocean-medium/70",children:"Blockchain Connected"})]}),a.jsx("p",{className:"text-xs text-ocean-medium/50 dark:text-ocean-light/50 mt-2",children:"Blockchain integration active"}),b&&a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 animate-pulse",children:"Loading blockchain todos..."})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[w&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 p-3 bg-white/30 dark:bg-ocean-deep/30 rounded-lg border border-ocean-light/20",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-sm text-ocean-medium dark:text-ocean-light",children:"Blockchain active"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-sm text-blue-600",children:"Blockchain-first mode"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-ocean-medium/70 dark:text-ocean-light/70",children:[F.length," todos"]})]}),F.map(e=>(0,a.jsxs)("div",{"data-testid":"todo-item",className:`p-4 rounded-lg transition-all ${e.completed?"bg-green-50/50 dark:bg-green-900/30 border border-green-200 dark:border-green-800/50":"bg-white/50 dark:bg-ocean-deep/30 border border-ocean-light/20"}`,children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("button",{onClick:()=>P(e.id),"data-testid":"todo-checkbox",className:`mt-1 w-5 h-5 rounded-full flex-shrink-0 ${e.completed?"bg-green-500 text-white flex items-center justify-center":"border-2 border-ocean-medium"}`,children:e.completed&&a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3 h-3",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[a.jsx("h3",{"data-testid":"todo-title",className:`font-medium ${e.completed?"line-through text-ocean-medium/70 dark:text-ocean-light/70 completed":"text-ocean-deep dark:text-ocean-foam"}`,children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.blockchainStored&&(0,a.jsxs)("span",{className:"flex items-center text-xs bg-dream-purple/20 text-dream-purple px-2 py-0.5 rounded-full",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-dream-purple rounded-full mr-1"}),"NFT"]}),e.objectId&&a.jsx("a",{href:`https://suiexplorer.com/object/${e.objectId}?network=testnet`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-ocean-medium hover:text-ocean-deep dark:text-ocean-light dark:hover:text-ocean-foam transition-colors",title:"View on Sui Explorer",children:"\uD83D\uDD0D"}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${"high"===e.priority?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-300":"medium"===e.priority?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300"}`,children:e.priority})]})]}),e.description&&a.jsx("p",{className:"mt-1 text-sm text-ocean-medium dark:text-ocean-light/80",children:e.description}),e.imageUrl&&a.jsx("div",{className:"mt-3",children:a.jsx(u,{todoId:e.id,imageUrl:e.imageUrl,showPerformanceMetrics:!1})}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.tags&&e.tags.map(e=>(0,a.jsxs)("span",{className:"text-xs bg-ocean-light/30 dark:bg-ocean-medium/30 text-ocean-deep dark:text-ocean-foam px-2 py-0.5 rounded-full",children:["#",e]},e)),e.dueDate&&(0,a.jsxs)("span",{className:"text-xs text-ocean-medium dark:text-ocean-light flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Due: ",e.dueDate]}),e.blockchainStored&&a.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400 flex items-center",children:"⛓️ On-chain todo"})]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-ocean-light/20 dark:border-ocean-medium/20 flex justify-end gap-2",children:[a.jsx("button",{className:"text-xs text-ocean-medium hover:text-ocean-deep dark:text-ocean-light dark:hover:text-ocean-foam transition-colors",children:"Edit"}),!e.blockchainStored&&w&&a.jsx("button",{onClick:()=>T(e),className:"text-xs text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-colors",children:"Store as NFT"}),a.jsx("button",{onClick:()=>Z(e),className:"text-xs text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors",children:"Delete"})]})]},e.objectId??e.id))]}):a.jsx(p,{})})}};