"use strict";exports.id=626,exports.ids=[626],exports.modules={48626:(e,t,r)=>{r.d(t,{U:()=>h});var a=r(87009),s=r(926),l=r(17676),i=r(97365),n=r(5903),d=r(89314),o=r(35328),c=r(73940),m=r(30242),x=r(90193);let h=({className:e=""})=>{let t=(0,m.t)(),r=(0,x.n)(),h=t?.address,[u,g]=(0,s.useState)("grid"),[p,y]=(0,s.useState)("date"),[j,v]=(0,s.useState)("all"),[f,b]=(0,s.useState)(""),[N,w]=(0,s.useState)(["high","medium","low"]),[k,C]=(0,s.useState)({start:null,end:null}),S=function(e,t){let[r,a]=(0,s.useState)(e);return r}(f,0),{data:T,error:I,fetchNextPage:M,hasNextPage:L,isFetchingNextPage:D,isLoading:A,isError:F}=(0,l.N)({queryKey:["todoNFTs",h,S,p,j,N,k],queryFn:async({pageParam:e})=>{if(!h)return{nfts:[],nextCursor:null};let t=await r.getClient();if(!t)return{nfts:[],nextCursor:null};try{let{data:r,nextCursor:a}=await t.getOwnedObjects({owner:h,filter:{StructType:`${process.env.NEXT_PUBLIC_PACKAGE_ID}::todo_nft::TodoNFT`},options:{showContent:!0,showType:!0,showOwner:!0,showDisplay:!0},cursor:e,limit:50});return{nfts:r.filter(e=>e.data?.content?.dataType==="moveObject").map(e=>{let t=e.data?.content,r=t?.dataType==="moveObject"?t.fields:{},a={id:e.data?.objectId||"",title:r?.title||"",description:r?.description||"",completed:r?.completed||!1,priority:r?.priority||"medium",createdAt:new Date(r?.created_at||Date.now()).toISOString(),imageUrl:r?.image_url||"",owner:r?.owner||("string"==typeof e.data?.owner?e.data.owner:e.data?.owner?.AddressOwner)||"",blockchainStored:!0,objectId:e.data?.objectId,metadata:r?.metadata,isPrivate:r?.is_private||!1};return(0,c.L6)(a)}),nextCursor:a}}catch(e){throw console.error("Error fetching NFTs:",e),e}},getNextPageParam:e=>e.nextCursor,initialPageParam:null,enabled:!!h&&r.isInitialized}),P=(0,s.useMemo)(()=>T?.pages.flatMap(e=>e.nfts)||[],[T]),O=(0,s.useMemo)(()=>{let e=[...P];if(S){let t=S.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}return"completed"===j?e=e.filter(e=>e.completed):"active"===j&&(e=e.filter(e=>!e.completed)),e=e.filter(e=>N.includes(e.priority)),(k.start||k.end)&&(e=e.filter(e=>{let t=new Date(e.createdAt||Date.now());return(!k.start||!(t<k.start))&&(!k.end||!(t>k.end))})),e.sort((e,t)=>{switch(p){case"date":return new Date(t.createdAt||0).getTime()-new Date(e.createdAt||0).getTime();case"title":return e.title.localeCompare(t.title);case"priority":let r={high:0,medium:1,low:2};return r[e.priority]-r[t.priority];default:return 0}}),e},[P,S,j,N,k,p]),z=(0,s.useCallback)(async(e,t)=>{L&&!D&&await M()},[M,L,D]),$=(0,s.useCallback)(e=>e<O.length,[O.length]),_=(0,s.useCallback)(({columnIndex:e,rowIndex:t,style:r})=>{let s=t*Math.floor((r.width-16)/336)+e;if(s>=O.length)return null;let l=O[s];return l?a.jsx("div",{style:{...r,left:r.left+16,top:r.top+16,width:320,height:400},children:a.jsx(o.x,{todo:l})}):null},[O]),H=(0,s.useCallback)(({index:e,style:t})=>{if(!$(e))return a.jsx("div",{style:t,className:"flex items-center justify-center",children:a.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 rounded-lg w-full h-24"})});let r=O[e];return r?a.jsx("div",{style:t,className:"px-4",children:a.jsx(o.x,{todo:r,variant:"list"})}):null},[O,$]);return A?a.jsx("div",{className:`${e} p-4`,children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:8}).map((e,t)=>a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg h-96"})},t))})}):F?a.jsx("div",{className:`${e} flex items-center justify-center h-64`,children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-500 mb-2",children:"Error loading NFTs"}),a.jsx("p",{className:"text-sm text-gray-500",children:I?.message})]})}):0===O.length?a.jsx("div",{className:`${e} flex items-center justify-center h-64`,children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No NFTs found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:f?"Try adjusting your search or filters":"Get started by creating your first Todo NFT"})]})}):(0,a.jsxs)("div",{className:`${e} flex flex-col h-full`,children:[a.jsx("div",{className:"flex-shrink-0 p-4 bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",placeholder:"Search NFTs...",value:f,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>g("grid"),className:`p-2 rounded ${"grid"===u?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,"aria-label":"Grid view",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),a.jsx("button",{onClick:()=>g("list"),className:`p-2 rounded ${"list"===u?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,"aria-label":"List view",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mr-2",children:"Sort by:"}),(0,a.jsxs)("select",{value:p,onChange:e=>y(e.target.value),className:"px-3 py-1 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"title",children:"Title"}),a.jsx("option",{value:"priority",children:"Priority"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mr-2",children:"Show:"}),(0,a.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"px-3 py-1 border rounded-md dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Priority:"}),["high","medium","low"].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:N.includes(e),onChange:t=>{t.target.checked?w([...N,e]):w(N.filter(t=>t!==e))},className:"mr-1"}),a.jsx("span",{className:"text-sm capitalize",children:e})]},e))]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date:"}),a.jsx("input",{type:"date",value:k.start?k.start.toISOString().split("T")[0]:"",onChange:e=>C({...k,start:e.target.value?new Date(e.target.value):null}),className:"px-2 py-1 border rounded-md text-sm dark:bg-gray-700 dark:border-gray-600"}),a.jsx("span",{className:"text-sm",children:"to"}),a.jsx("input",{type:"date",value:k.end?k.end.toISOString().split("T")[0]:"",onChange:e=>C({...k,end:e.target.value?new Date(e.target.value):null}),className:"px-2 py-1 border rounded-md text-sm dark:bg-gray-700 dark:border-gray-600"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",O.length," of ",P.length," NFTs"]})]})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(d.ZP,{children:({height:e,width:t})=>a.jsx(n.Z,{isItemLoaded:$,itemCount:O.length+(L?1:0),loadMoreItems:z,children:({onItemsRendered:r,ref:s})=>{if("grid"!==u)return a.jsx(i.t7,{ref:s,height:e,itemCount:O.length,itemSize:120,width:t,onItemsRendered:r,children:H});{let l=Math.floor((t-16)/336),n=Math.ceil(O.length/l);return a.jsx(i.Ym,{ref:s,columnCount:l,columnWidth:336,height:e,rowCount:n,rowHeight:416,width:t,onItemsRendered:({visibleRowStartIndex:e,visibleRowStopIndex:t,visibleColumnStartIndex:a,visibleColumnStopIndex:s})=>{let i=e*l+a,n=t*l+s;r({visibleStartIndex:i,visibleStopIndex:n,overscanStartIndex:i,overscanStopIndex:n})},children:_})}}})})}),D&&a.jsx("div",{className:"flex-shrink-0 p-4 text-center border-t dark:border-gray-700",children:a.jsx("span",{className:"text-sm text-gray-500",children:"Loading more NFTs..."})})]})}}};