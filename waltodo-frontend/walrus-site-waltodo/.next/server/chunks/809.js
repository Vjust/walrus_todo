"use strict";exports.id=809,exports.ids=[809],exports.modules={55809:(e,a,r)=>{r.d(a,{dg:()=>c,em:()=>u});var t=r(87009),l=r(926),i=r(59475),s=r(64330),o=r(29238);let n={retryConfig:{maxRetries:5,initialDelay:1e3,maxDelay:1e4,backoffFactor:2}};function c({src:e,alt:a,className:r="",width:o,height:n,lazy:c=!0,placeholder:u="blur",priority:d="auto",size:f="medium",sizes:h,quality:m=75,onLoad:p,onError:g,fallbackSrc:y="/images/nft-placeholder.png"}){let b=(0,l.useRef)(null),[v,w]=(0,l.useState)(!1),x=e&&(e.includes("walrus")||e.includes("blob")),j="boolean"==typeof d?d?"high":"auto":d,C=function(e,a={}){let[r,t]=(0,l.useState)({isLoading:!0,hasError:!1,originalUrl:void 0,optimizedUrl:void 0,blurDataUrl:void 0});return r}(0,{size:f,priority:j,generateBlur:"blur"===u}),z=(0,s.eP)(x?"":e,{priority:j}),S=(0,s.J)(c&&!x?e:"",b),$=x?{isLoading:C.isLoading,hasError:C.hasError||v,loadedSrc:C.optimizedUrl,blurDataUrl:C.blurDataUrl}:c?S:z,N=(0,l.useCallback)(()=>{w(!0),g?.()},[g]),E=(0,l.useCallback)(()=>{p?.()},[p]);return $.hasError?t.jsx("div",{ref:b,className:`relative overflow-hidden ${r}`,style:{width:o,height:n},children:t.jsx(i.default,{src:y,alt:a,fill:!0,className:"w-full h-full object-cover",onError:()=>console.error("Even fallback image failed to load"),unoptimized:!0})}):(0,t.jsxs)("div",{ref:b,className:`relative overflow-hidden ${r}`,style:{width:o,height:n},children:[$.isLoading&&("shimmer"===u?t.jsx("div",{className:"animate-pulse bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 w-full h-full"}):"blur"===u&&$.blurDataUrl?t.jsx(i.default,{src:$.blurDataUrl,alt:"",fill:!0,className:"absolute inset-0 w-full h-full object-cover filter blur-lg scale-110","aria-hidden":"true",unoptimized:!0}):t.jsx("div",{className:"bg-gray-200 w-full h-full flex items-center justify-center",children:t.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})})),$.loadedSrc&&t.jsx(i.default,{src:$.loadedSrc,alt:a,fill:!0,className:`w-full h-full object-cover transition-opacity duration-300 ${$.isLoading?"opacity-0":"opacity-100"}`,onLoad:E,onError:N,loading:c?"lazy":"eager",priority:"high"===d||!0===d,sizes:h,quality:m,unoptimized:!!x})]})}function u({images:e,columns:a=3,imageSize:r="medium",gap:l=4,aspectRatio:i="square"}){let s={square:"aspect-square",video:"aspect-video",portrait:"aspect-[3/4]",landscape:"aspect-[4/3]"}[i];return t.jsx("div",{className:`grid gap-${l}`,style:{gridTemplateColumns:`repeat(${a}, 1fr)`},children:e.map((e,l)=>t.jsx("div",{className:`${s} relative overflow-hidden rounded-lg`,children:t.jsx(c,{src:e.src,alt:e.alt,className:"absolute inset-0 w-full h-full",size:r,priority:e.priority||l<a?"high":"auto",lazy:l>=2*a})},e.id))})}s.mv},64330:(e,a,r)=>{r.d(a,{J:()=>u,O5:()=>d,eP:()=>c,mv:()=>n});var t=r(92206),l=r(926);let i=new t.z({max:100,ttl:864e5,sizeCalculation:e=>e.length,maxSize:52428800}),s=new t.z({max:200,ttl:6048e5}),o=new Map;class n{constructor(e){this.performanceStart=0,this.retryCount=0,this.maxRetries=3,this.offlineCache=null,this.state={src:e,isLoading:!0,hasError:!1},this.initOfflineCache()}async initOfflineCache(){}async load(e={}){return{src:this.state.src,srcSet:function(e,a=[320,640,960,1280,1920]){return e.includes("walrus")||e.includes("blob")?`${e} 1x`:a.map(a=>`${e}?w=${a} ${a}w`).join(", ")}(this.state.src)}}async checkOfflineCache(e){if(!this.offlineCache)return null;try{return await this.offlineCache.match(e)||null}catch{return null}}async cacheOffline(e){if(this.offlineCache)try{let a=await fetch(e);a.ok&&await this.offlineCache.put(e,a.clone())}catch(e){console.error("Failed to cache image offline:",e)}}recordPerformance(e,a,r){let t=performance.now()-this.performanceStart;o.set(this.state.src,{loadTime:t,size:e,format:a,cached:r}),t>3e3&&!r&&console.warn(`Slow image load: ${this.state.src} took ${t.toFixed(2)}ms`)}getState(){return{...this.state}}}function c(e,a={}){let[r,t]=(0,l.useState)({src:e,isLoading:!0,hasError:!1});return r}function u(e,a){let[r,t]=(0,l.useState)(!1);return{...c(r?e:"",{priority:r?"high":"low"}),isInView:r}}function d(){i.clear(),s.clear(),o.clear()}}};