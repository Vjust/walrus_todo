"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8436],{98436:function(t,e,n){n.d(e,{rk:function(){return _},qv:function(){return A},aS:function(){return E},VU:function(){return D},cA:function(){return N},LC:function(){return O},ES:function(){return j},transferTodoNFT:function(){return C},CU:function(){return x}});var o=n(2960);let r={},a=()=>!0,c=!0,l=null;{let t=()=>{c=!1,l&&(clearTimeout(l),l=null)};"complete"===document.readyState?t():(document.addEventListener("DOMContentLoaded",t,{once:!0}),window.addEventListener("load",t,{once:!0}),l=setTimeout(t,500))}function i(){if(!a()||c||"undefined"!=typeof document&&"loading"===document.readyState)return!1;try{if(void 0===window.localStorage||null===window.localStorage)return!1;let t="__storage_test_key__";window.localStorage.setItem(t,"test");let e=window.localStorage.getItem(t);return window.localStorage.removeItem(t),"test"===e}catch(t){return!1}}function d(t,e,n){if(!a()||c||"undefined"!=typeof document&&"loading"===document.readyState)return[!1,null];try{if(void 0===window.localStorage||null===window.localStorage)return[!1,null];switch(t){case"get":return[!0,window.localStorage.getItem(e)];case"set":return window.localStorage.setItem(e,JSON.stringify(n)),[!0,null];case"remove":return window.localStorage.removeItem(e),[!0,null];default:return[!1,null]}}catch(t){return[!1,null]}}function u(t,e){try{let[n,o]=d("get",t);if(n&&null!==o)try{return JSON.parse(o)}catch(t){}let a=r[t];return a?JSON.parse(a):null!=e?e:null}catch(t){return null!=e?e:null}}function s(t,e){try{let n=JSON.stringify(e);r[t]=n;let[o]=d("set",t,e);return!0}catch(n){try{return r[t]=JSON.stringify(e),!0}catch(t){return!1}}}function f(t){try{return delete r[t],d("remove",t),!0}catch(e){return delete r[t],!0}}function g(){return!i()}var p=n(25288),w=n(51705),m=n(32608);let y=null;async function h(){if(!y){let t=m.env.NEXT_PUBLIC_NETWORK||"testnet";(y=await (0,p.P3)(t))||(y={network:{name:"testnet",url:"https://fullnode.testnet.sui.io",explorerUrl:"https://testnet.suiexplorer.com"},walrus:{networkUrl:"https://wal.testnet.sui.io",publisherUrl:"https://publisher-testnet.walrus.space",aggregatorUrl:"https://aggregator-testnet.walrus.space",apiPrefix:"https://api-testnet.walrus.tech/1.0"},deployment:{packageId:"0xd6f97fc85796ee23adf60504a620631a0eea6947f85c4ca51e02245e9a4b57d7",digest:"unknown",timestamp:new Date().toISOString(),deployerAddress:"0xca793690985183dc8e2180fd059d76f3b0644f5c2ecd3b01cdebe7d40b0cca39"},contracts:{todoNft:{packageId:"0xd6f97fc85796ee23adf60504a620631a0eea6947f85c4ca51e02245e9a4b57d7",moduleName:"todo_nft",structName:"TodoNFT"}},features:{aiEnabled:!1,blockchainVerification:!1,encryptedStorage:!1}})}return y}let b={default:{name:"Default",todos:[{id:"1",title:"Set up blockchain wallet",completed:!1,priority:"high",tags:["setup","blockchain"],blockchainStored:!0,objectId:"0xabc123"},{id:"2",title:"Design oceanic UI components",description:"Create reusable Tailwind components with ocean theme",completed:!0,priority:"medium",tags:["design","frontend"],blockchainStored:!1},{id:"3",title:"Implement Sui blockchain connectivity",completed:!1,priority:"high",dueDate:"2023-12-01",blockchainStored:!1}]},work:{name:"Work",todos:[{id:"4",title:"Test NFT todo transfers",completed:!1,priority:"medium",tags:["testing","blockchain"],blockchainStored:!1}]},personal:{name:"Personal",todos:[]},shopping:{name:"Shopping",todos:[]}},S=({getItem:u,setItem:s,removeItem:f,clear:function(){try{if(Object.keys(r).forEach(t=>delete r[t]),a()&&!c&&void 0!==window.localStorage&&"complete"===document.readyState)try{window.localStorage.clear()}catch(t){}return!0}catch(t){return Object.keys(r).forEach(t=>delete r[t]),!0}},keys:function(){try{let t=Object.keys(r);if(a()&&!c&&void 0!==window.localStorage&&"complete"===document.readyState)try{let e=Object.keys(window.localStorage).concat(t);return e.filter((t,n)=>e.indexOf(t)===n)}catch(t){}return t}catch(t){return Object.keys(r)}},isAvailable:i,isFallback:g,createTyped:function(t,e){return{get:()=>u(t,e),set:e=>s(t,e),clear:()=>f(t)}}}).createTyped("walrusTodoLists",{}),k={};function v(t){return t?t.toLowerCase():"anonymous"}function I(){try{S.set(k)}catch(t){console.warn("Failed to save wallet todos to storage:",t)}}function T(t){let e=v(t);return k[e]||function(){try{let t=S.get();t&&"object"==typeof t&&(k=t),g()}catch(t){console.warn("Failed to load wallet todos from storage:",t)}}(),k[e]||(k[e]={...b},I()),k[e]}function N(t){return Object.keys(T(t))}function O(t,e){var n;return(null===(n=T(e)[t])||void 0===n?void 0:n.todos)||[]}function _(t,e,n){let o=v(n),r=T(n);r[t]||(r[t]={name:t,todos:[]});let a={...e,id:Date.now().toString(),blockchainStored:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r[t].todos.push(a),k[o]=r,I(),a}function x(t,e,n){let o=v(n),r=T(n);if(!r[t])return!1;let a=r[t].todos.findIndex(t=>t.id===e.id);return -1!==a&&(r[t].todos[a]={...e,updatedAt:new Date().toISOString()},k[o]=r,I(),!0)}function E(t,e,n){let o=v(n),r=T(n);if(!r[t])return!1;let a=r[t].todos.length;return r[t].todos=r[t].todos.filter(t=>t.id!==e),k[o]=r,I(),r[t].todos.length!==a}function A(t,e){let n=v(e),o=T(e);return!o[t]&&(o[t]={name:t,todos:[]},k[n]=o,I(),!0)}function D(t,e){let n=v(e),o=T(e);return!!o[t]&&"default"!==t&&(delete o[t],k[n]=o,I(),!0)}async function j(t,e,n,r){let a=T(r);if(!a[t])return null;let c=a[t].todos.find(t=>t.id===e);if(!c)return null;if(!n||!n.signAndExecuteTransaction)return console.warn("No wallet signer available - running in read-only mode"),null;try{var l,i,d,u;let a=await h(),s={title:c.title,description:c.description||"",priority:c.priority,tags:c.tags,dueDate:c.dueDate,createdAt:new Date().toISOString(),localId:c.id},f=await w.$4.uploadJson(s,{epochs:5}),g=new o.Y,p=new TextEncoder().encode(c.title),m=new TextEncoder().encode(c.description||""),y=new TextEncoder().encode(w.$4.getBlobUrl(f.blobId)),b=new TextEncoder().encode(JSON.stringify({priority:c.priority,tags:c.tags,dueDate:c.dueDate,walrusBlobId:f.blobId}));g.moveCall({target:"".concat(a.deployment.packageId,"::todo_nft::create_todo_nft"),arguments:[g.pure.vector("u8",Array.from(p)),g.pure.vector("u8",Array.from(m)),g.pure.vector("u8",Array.from(y)),g.pure.vector("u8",Array.from(b)),g.pure.bool(!1)]});let S=await n.signAndExecuteTransaction(g),N=(null===(u=S.effects)||void 0===u?void 0:null===(d=u.created)||void 0===d?void 0:null===(i=d[0])||void 0===i?void 0:null===(l=i.reference)||void 0===l?void 0:l.objectId)||null;return N&&function(t,e,n,o){let r=v(o),a=T(o);if(!a[t])return;let c=a[t].todos.findIndex(t=>t.id===e);-1!==c&&(a[t].todos[c].blockchainStored=!0,a[t].todos[c].objectId=n,k[r]=a,I())}(t,e,N,r),N}catch(t){return console.error("Failed to store todo on blockchain:",t),null}}async function C(t,e,n,r,a){let c=T(a);if(!c[t])return!1;let l=c[t].todos.find(t=>t.id===e);if(!l||!l.blockchainStored||!l.objectId)return console.error("Todo not found or not stored on blockchain"),!1;if(!r||!r.signAndExecuteTransaction)return console.warn("No wallet signer available - cannot transfer NFT"),!1;try{let c=await h(),i=new o.Y;if(i.moveCall({target:"".concat(c.deployment.packageId,"::todo_nft::transfer_todo_nft"),arguments:[i.object(l.objectId),i.pure.address(n)]}),(await r.signAndExecuteTransaction(i)).digest)return E(t,e,a),!0;return!1}catch(t){return console.error("Failed to transfer todo NFT:",t),!1}}}}]);