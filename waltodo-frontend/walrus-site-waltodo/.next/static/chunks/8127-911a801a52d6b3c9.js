"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8127],{88127:function(e,t,a){a.d(t,{Z:function(){return o}});var s=a(29754),l=a(22585),i=a(62196);function r(e){let{blobId:t,imageUrl:a,alt:r,className:n="",width:o,height:c,priority:d=!1,placeholder:u="blur",quality:h=75,sizes:m,onLoad:x,onError:p}=e,[v,b]=(0,l.useState)(!1),[g,w]=(0,l.useState)(!0),f=(0,l.useMemo)(()=>t?["https://aggregator.walrus-testnet.walrus.space","https://walrus-testnet-publisher.nodes.guru","https://publisher-devnet.walrus.space"].map(e=>"".concat(e,"/v1/").concat(t)):[],[t]),j=(0,l.useMemo)(()=>a||(f.length>0?f[0]:void 0),[a,f]),k=(0,l.useCallback)(()=>{w(!1),b(!1),null==x||x()},[x]),y=(0,l.useCallback)(()=>{b(!0),w(!1);let e=Error("Failed to load Walrus image");null==p||p(e)},[p]);return j?v?(0,s.jsx)("div",{className:"bg-red-100 border border-red-300 flex items-center justify-center ".concat(n),style:{width:o,height:c},children:(0,s.jsxs)("div",{className:"text-center p-4",children:[(0,s.jsx)("svg",{className:"w-8 h-8 text-red-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("p",{className:"text-xs text-red-600",children:"Failed to load image"}),t&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1 truncate",title:t,children:["Blob: ",t.slice(0,8),"..."]})]})}):(0,s.jsxs)("div",{className:"relative ".concat(n),children:[g&&(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-200 flex items-center justify-center animate-pulse",style:{width:o,height:c},children:(0,s.jsxs)("svg",{className:"w-8 h-8 text-gray-400 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,s.jsx)(i.OptimizedImage,{src:j,alt:r,width:o,height:c,className:"".concat(g?"opacity-0":"opacity-100"," transition-opacity duration-300"),priority:d,placeholder:u,quality:h,sizes:m,onLoad:k,onError:y}),!1]}):(0,s.jsx)("div",{className:"bg-gray-200 flex items-center justify-center ".concat(n),style:{width:o,height:c},children:(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}let n={thumbnail:{width:150,height:150,size:"thumbnail",containerClass:"w-[150px] h-[150px]"},preview:{width:400,height:400,size:"medium",containerClass:"w-[400px] h-[400px]"},full:{width:1200,height:1200,size:"large",containerClass:"w-full max-w-[1200px] h-[600px]"}};function o(e){let{url:t,alt:a,mode:o,displayMode:c="preview",className:d="",onClick:u,onLoad:h,onError:m,priority:x=!1,placeholder:p="blur",blurDataURL:v,quality:b=75,sizes:g,showSkeleton:w=!1,lazy:f=!1,expandable:j=!0,fallbackUrl:k,enableHover:y=!0,ariaLabel:N}=e,[C,I]=(0,l.useState)(!1),[z,L]=(0,l.useState)(!1),[M,W]=(0,l.useState)(!0),[E,B]=(0,l.useState)(!f),F=o||c,S=(0,l.useMemo)(()=>{if(!t)return{isWalrus:!1,blobId:null};if(t.startsWith("walrus://"))return{isWalrus:!0,blobId:t.replace("walrus://","").split("/")[0]};let e=t.match(/\/v1\/([a-zA-Z0-9_-]+)/);return e?{isWalrus:!0,blobId:e[1]}:t.includes("walrus")||t.includes("aggregator")?{isWalrus:!0,blobId:null}:/^[a-zA-Z0-9_-]+$/.test(t)&&t.length>20?{isWalrus:!0,blobId:t}:{isWalrus:!1,blobId:null}},[t]),_=(0,l.useMemo)(()=>z&&k?k:t,[t,z,k]),O=(0,l.useCallback)(()=>{u?u():j&&I(!C)},[u,C,j]),A=(0,l.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),O()),"Escape"===e.key&&C&&I(!1)},[O,C]),H=(0,l.useMemo)(()=>n[C?"full":F],[F,C]);(0,l.useMemo)(()=>{if(g)return g;switch(F){case"thumbnail":return"(max-width: 640px) 100vw, (max-width: 768px) 50vw, 150px";case"preview":return"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 400px";case"full":return"(max-width: 1200px) 100vw, 1200px";default:return}},[g,F]);let Z=(0,l.useCallback)(()=>{L(!0),W(!1),null==m||m(Error("Failed to load image"))},[m]),D=(0,l.useCallback)(()=>{W(!1),null==h||h()},[h]),P=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!f||E)return;let e=new IntersectionObserver(t=>{let[a]=t;a.isIntersecting&&(B(!0),e.disconnect())},{threshold:.1});return P.current&&e.observe(P.current),()=>e.disconnect()},[f,E]);let U={alt:a,className:"w-full h-full",priority:x,placeholder:p,onLoad:D,onError:Z,width:H.width,height:H.height};(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&C&&I(!1)};if(C)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[C]);let V=C&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 p-4",onClick:()=>I(!1),role:"dialog","aria-modal":"true","aria-label":"Expanded image view",children:(0,s.jsxs)("div",{className:"relative max-w-[90vw] max-h-[90vh]",children:[(0,s.jsx)("button",{className:"absolute -top-12 right-0 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75 transition-opacity",onClick:e=>{e.stopPropagation(),I(!1)},"aria-label":"Close modal",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("div",{className:"relative overflow-hidden rounded-lg",onClick:e=>e.stopPropagation(),children:S.isWalrus?(0,s.jsx)(r,{blobId:S.blobId||void 0,imageUrl:S.blobId?void 0:_,...U,sizes:"100vw",className:"max-w-full max-h-[90vh] object-contain"}):(0,s.jsx)(i.OptimizedImage,{src:_,...U,sizes:"100vw",className:"max-w-full max-h-[90vh] object-contain"})})]})});if(w&&(M||!E))return(0,s.jsx)("div",{className:"relative inline-block ".concat(d),role:"status","aria-label":"Loading image",children:(0,s.jsx)("div",{className:"animate-pulse bg-gray-300 rounded-lg ".concat(H.containerClass)})});if(z&&!k)return(0,s.jsx)("div",{className:"relative inline-block ".concat(d),role:"alert","aria-label":"Failed to load image",children:(0,s.jsx)("div",{className:"flex items-center justify-center bg-gray-200 rounded-lg ".concat(H.containerClass),children:(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"Failed to load image"})})});let q=y&&(j||u);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:P,className:"relative inline-block ".concat(d),children:(0,s.jsxs)("div",{className:"relative overflow-hidden rounded-lg transition-all duration-300 ".concat(q?"cursor-pointer":""," ").concat(q&&"thumbnail"===F?"hover:scale-110":q&&"preview"===F?"hover:scale-105":q?"hover:scale-102":""," ").concat(q?"hover:shadow-lg":""," ").concat(H.containerClass),onClick:j||u?O:void 0,onKeyDown:j||u?A:void 0,tabIndex:j||u?0:void 0,role:j||u?"button":"img","aria-label":N||(j?"".concat(a," - Click to ").concat(C?"close":"expand"):a),children:[E&&(S.isWalrus?(0,s.jsx)(r,{blobId:S.blobId||void 0,imageUrl:S.blobId?void 0:_,...U}):(0,s.jsx)(i.OptimizedImage,{src:_,...U})),q&&j&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-opacity duration-300 flex items-center justify-center pointer-events-none",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 drop-shadow-lg",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]})}),V]})}}}]);