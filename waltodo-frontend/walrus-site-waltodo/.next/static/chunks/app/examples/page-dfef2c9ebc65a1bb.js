(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4668],{84946:function(e,t,n){Promise.resolve().then(n.bind(n,68471))},68471:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var r=n(29754),s=n(22585),a=n(6229);function o(e){let{children:t,fallback:n}=e,o=function(){let[e,t]=(0,s.useState)(!1),n=(0,a.tN)();return(0,s.useEffect)(()=>{t(!0)},[]),e?n:null}();return o?(0,r.jsx)(r.Fragment,{children:t(o)}):n||(0,r.jsx)("div",{className:"p-4 ocean-card",children:(0,r.jsx)("div",{className:"p-4 bg-ocean-deep/10 rounded-lg",children:(0,r.jsx)("p",{children:"Initializing wallet connection..."})})})}var i=n(98436);function c(e){let{maxItems:t=5}=e,n=(0,a.tN)(),o=(null==n?void 0:n.transactionHistory)||[],[i,c]=(0,s.useState)(!1),l=i?o:o.slice(0,t);if(0===o.length)return(0,r.jsx)("div",{className:"p-4 ocean-card",children:(0,r.jsx)("p",{className:"text-ocean-medium dark:text-ocean-light text-sm",children:"No transactions yet"})});let d=e=>{let t=new Date(e).getTime();if("undefined"==typeof Intl||!Intl.RelativeTimeFormat)return u(t);let n=Math.floor((Date.now()-t)/1e3),r=new Intl.RelativeTimeFormat("en",{numeric:"auto"});if(n<60)return r.format(-n,"second");let s=Math.floor(n/60);if(s<60)return r.format(-s,"minute");let a=Math.floor(s/60);return a<24?r.format(-a,"hour"):r.format(-Math.floor(a/24),"day")},u=e=>{let t=Math.floor((Date.now()-e)/1e3);if(t<60)return"".concat(t," seconds ago");let n=Math.floor(t/60);if(n<60)return"".concat(n," minute").concat(1!==n?"s":""," ago");let r=Math.floor(n/60);if(r<24)return"".concat(r," hour").concat(1!==r?"s":""," ago");let s=Math.floor(r/24);return"".concat(s," day").concat(1!==s?"s":""," ago")},h=e=>{switch(e){case"pending":return(0,r.jsx)("div",{className:"w-4 h-4 bg-yellow-400 rounded-full animate-pulse",title:"Pending transaction"});case"success":return(0,r.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"failed":return(0,r.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}};return(0,r.jsxs)("div",{className:"rounded-lg overflow-hidden bg-white dark:bg-slate-800 shadow-sm border border-ocean-light/20",children:[(0,r.jsxs)("div",{className:"bg-ocean-light/10 dark:bg-ocean-deep/20 px-4 py-2 flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"font-medium text-sm text-ocean-deep dark:text-ocean-foam",children:"Transaction History"}),o.length>t&&(0,r.jsx)("button",{onClick:()=>c(!i),className:"text-xs text-ocean-medium hover:text-ocean-deep dark:text-ocean-light dark:hover:text-ocean-foam",children:i?"Show less":"Show all (".concat(o.length,")")})]}),(0,r.jsx)("div",{className:"px-4 py-2 divide-y divide-ocean-light/10",children:l.map(e=>{var t,n;return(0,r.jsxs)("div",{className:"border-b border-ocean-light/20 last:border-0 py-3 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:h(e.status)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("p",{className:"text-sm font-medium truncate",children:[e.type,(null===(t=e.details)||void 0===t?void 0:t.digest)&&(0,r.jsxs)("span",{className:"ml-2 text-xs text-ocean-medium dark:text-ocean-light truncate",children:[e.details.digest.slice(0,8),"...",e.details.digest.slice(-6)]})]}),(0,r.jsx)("p",{className:"text-xs text-ocean-medium dark:text-ocean-light ml-2",children:d(e.timestamp)})]}),"failed"===e.status&&(null===(n=e.details)||void 0===n?void 0:n.error)&&(0,r.jsx)("p",{className:"text-xs text-red-500 mt-1 truncate",children:e.details.error})]})]},e.id)})})]})}function l(){return(0,r.jsx)(o,{children:e=>(0,r.jsx)(d,{wallet:e})})}function d(e){let{wallet:t}=e,{connected:n,address:a,chainId:o,name:l,connect:d,disconnect:u,switchNetwork:h,trackTransaction:m}=t,[x,f]=(0,s.useState)("idle"),[g,p]=(0,s.useState)(null),v=async(e,t)=>{if(!n){alert("Please connect your wallet first");return}f("pending");try{let n=await (0,i.ES)(e,t);if(n)f("success"),p(n);else throw Error("Failed to store todo on blockchain")}catch(e){console.error("Transaction failed:",e),f("error")}};return(0,r.jsxs)("div",{className:"p-4 ocean-card",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Wallet Usage Example"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"p-4 bg-ocean-deep/10 rounded-lg",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Connected:"})," ",n?"Yes":"No"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Wallet:"})," ",l||"None"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Address:"})," ",a||"Not connected"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Network:"})," ",o||"Unknown"]})]}),(0,r.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[n?(0,r.jsx)("button",{onClick:()=>u(),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Disconnect"}):(0,r.jsx)("button",{onClick:()=>d(),className:"px-4 py-2 bg-ocean-deep text-white rounded-lg hover:bg-ocean-deep/80",children:"Connect Wallet"}),n&&(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>h("mainnet"),className:"px-4 py-2 rounded-lg ".concat("mainnet"===o?"bg-green-500 text-white":"bg-gray-200 hover:bg-gray-300"),children:"Mainnet"}),(0,r.jsx)("button",{onClick:()=>h("testnet"),className:"px-4 py-2 rounded-lg ".concat("testnet"===o?"bg-green-500 text-white":"bg-gray-200 hover:bg-gray-300"),children:"Testnet"}),(0,r.jsx)("button",{onClick:()=>h("devnet"),className:"px-4 py-2 rounded-lg ".concat("devnet"===o?"bg-green-500 text-white":"bg-gray-200 hover:bg-gray-300"),children:"Devnet"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Transaction Example"}),(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,r.jsx)("button",{onClick:()=>v("default","123"),disabled:!n||"pending"===x,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-300 disabled:cursor-not-allowed",children:"pending"===x?"Processing...":"Store Todo on Blockchain"}),"pending"===x&&(0,r.jsx)("div",{className:"text-yellow-600",children:"Transaction in progress..."}),"success"===x&&(0,r.jsxs)("div",{className:"text-green-600",children:["Transaction successful! Object ID: ",g]}),"error"===x&&(0,r.jsx)("div",{className:"text-red-600",children:"Transaction failed. Please try again."})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Transaction History"}),(0,r.jsx)(c,{maxItems:3})]})]})]})}},36729:function(e,t,n){"use strict";let r,s,a,o;n.d(t,{X3:function(){return x}});let i=(e,t)=>t.some(t=>e instanceof t),c=new WeakMap,l=new WeakMap,d=new WeakMap,u={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(h(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)});return d.set(t,e),t}(e);if(l.has(e))return l.get(e);let n="function"==typeof(t=e)?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(m(this),e),h(this.request)}:function(...e){return h(t.apply(m(this),e))}:(t instanceof IDBTransaction&&function(e){if(c.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});c.set(e,t)}(t),i(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,u):t;return n!==e&&(l.set(e,n),d.set(n,e)),n}let m=e=>d.get(e);function x(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){let o=indexedDB.open(e,t),i=h(o);return r&&o.addEventListener("upgradeneeded",e=>{r(h(o.result),e.oldVersion,e.newVersion,h(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),i.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i}let f=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],p=new Map;function v(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(p.get(t))return p.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=g.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||f.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&a.done]))[0]};return p.set(t,a),a}u={...a=u,get:(e,t,n)=>v(e,t)||a.get(e,t,n),has:(e,t)=>!!v(e,t)||a.has(e,t)};let j=["continue","continuePrimaryKey","advance"],b={},y=new WeakMap,N=new WeakMap,w={get(e,t){if(!j.includes(t))return e[t];let n=b[t];return n||(n=b[t]=function(...e){y.set(this,N.get(this)[t](...e))}),n}};async function*k(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,w);for(N.set(n,t),d.set(n,m(t));t;)yield n,t=await (y.get(n)||t.continue()),y.delete(n)}function I(e,t){return t===Symbol.asyncIterator&&i(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&i(e,[IDBIndex,IDBObjectStore])}u={...o=u,get:(e,t,n)=>I(e,t)?k:o.get(e,t,n),has:(e,t)=>I(e,t)||o.has(e,t)}}},function(e){e.O(0,[6168,1705,6229,8436,9499,2391,1744],function(){return e(e.s=84946)}),_N_E=e.O()}]);