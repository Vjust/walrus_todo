(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{62623:function(e,t,s){Promise.resolve().then(s.bind(s,30494))},54780:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var i=s(22585);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),r=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,i.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:d="",children:m,iconNode:u,...h}=e;return(0,i.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:s,strokeWidth:r?24*Number(n)/Number(a):n,className:l("lucide",d),...!m&&!o(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,s]=e;return(0,i.createElement)(t,s)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let s=(0,i.forwardRef)((s,n)=>{let{className:o,...c}=s;return(0,i.createElement)(d,{ref:n,iconNode:t,className:l("lucide-".concat(a(r(e))),"lucide-".concat(e),o),...c})});return s.displayName=r(e),s}},35463:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(54780).Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},30494:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var i=s(29754),a=s(22585),n=s(82090),r=s(6229),l=s(98436),o=s(19132),c=s(59295),d=s(82265);function m(e){let{listName:t,onTodoAdded:s}=e,[n,m]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[x,f]=(0,a.useState)("medium"),[p,g]=(0,a.useState)(""),[v,b]=(0,a.useState)(""),[N,y]=(0,a.useState)(!1),[j,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(null),[C,P]=(0,a.useState)(!1),[M,A]=(0,a.useState)(!0),[E,I]=(0,a.useState)(!1),{address:W,connected:z,signAndExecuteTransaction:T}=(0,r.tN)()||{},{isInitialized:R,isInitializing:L,error:F}=(0,c.n)("testnet");(0,a.useEffect)(()=>(I(!0),()=>{I(!1)}),[]);let D=async e=>{if(e.preventDefault(),E&&n.trim()){w(!0),S(null);try{let e;let i={title:n.trim(),description:u.trim()||void 0,completed:!1,priority:x,tags:p?p.split(",").map(e=>e.trim()).filter(Boolean):void 0,dueDate:v||void 0};if(e=(0,l.rk)(t,i,W||void 0),M&&z&&W&&T&&R){P(!0);try{let s={title:i.title,description:i.description||"",imageUrl:"https://walrus-todo.vercel.app/images/todo-default.png",metadata:JSON.stringify({priority:i.priority,tags:i.tags,dueDate:i.dueDate,listName:t}),isPrivate:!1},a=await (0,o.storeTodoOnBlockchain)(s,T,W);a.success&&e&&a.objectId&&(e.blockchainStored=!0,e.objectId=a.objectId)}catch(e){d.default.error("Todo created locally but blockchain storage failed. It will be retried later.",{duration:5e3,icon:"⚠️"})}}m(""),h(""),f("medium"),g(""),b(""),y(!1),null==s||s(),M&&e.blockchainStored?d.default.success("Todo NFT created on Sui blockchain!",{duration:5e3,icon:"\uD83C\uDF89"}):d.default.success("Todo created successfully!",{duration:3e3})}catch(t){let e=t instanceof Error?t.message:"Failed to create todo";S(e),d.default.error(e,{duration:5e3})}finally{w(!1),P(!1)}}};return E?(0,i.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[k&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,i.jsx)("p",{className:"text-sm text-red-700",children:k})}),!z&&(0,i.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,i.jsx)("p",{className:"text-sm text-amber-700",children:"Connect your wallet to create and manage your personal todos"})}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",value:n,onChange:e=>m(e.target.value),placeholder:"What needs to be done?",className:"ocean-input w-full",required:!0})}),(0,i.jsx)("div",{children:(0,i.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),placeholder:"Add a description (optional)",className:"ocean-input w-full h-20 resize-none"})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-ocean-medium dark:text-ocean-light mb-1",children:"Priority"}),(0,i.jsxs)("select",{value:x,onChange:e=>f(e.target.value),className:"ocean-input w-full",children:[(0,i.jsx)("option",{value:"low",children:"Low"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"high",children:"High"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-ocean-medium dark:text-ocean-light mb-1",children:"Tags (comma separated)"}),(0,i.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),placeholder:"work, important, etc.",className:"ocean-input w-full"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-ocean-medium dark:text-ocean-light mb-1",children:"Due Date (optional)"}),(0,i.jsx)("input",{type:"date",value:v,onChange:e=>b(e.target.value),className:"ocean-input w-full"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"useAI",checked:N,onChange:e=>y(e.target.checked),className:"w-4 h-4 rounded text-ocean-medium focus:ring-ocean-light"}),(0,i.jsx)("label",{htmlFor:"useAI",className:"ml-2 text-sm text-ocean-medium dark:text-ocean-light",children:"Use AI to suggest tags and priority"})]}),z&&(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",id:"createOnBlockchain",checked:M,onChange:e=>A(e.target.checked),className:"w-4 h-4 rounded text-ocean-medium focus:ring-ocean-light"}),(0,i.jsxs)("label",{htmlFor:"createOnBlockchain",className:"ml-2 text-sm text-ocean-medium dark:text-ocean-light",children:["Create as NFT on Sui blockchain",C&&(0,i.jsx)("span",{className:"ml-2 text-xs text-blue-600 animate-pulse",children:"Creating on-chain..."})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,i.jsxs)("div",{className:"text-sm text-ocean-medium dark:text-ocean-light",children:["Adding to: ",(0,i.jsx)("span",{className:"font-medium",children:t})]}),(0,i.jsx)("button",{type:"submit",disabled:j||!n.trim()||M&&(!z||!R),className:"ocean-button ".concat(!j&&n.trim()&&(!M||z&&R)?"":"opacity-70 cursor-not-allowed"),children:j?C?"Creating NFT...":"Adding...":M&&!z?"Connect Wallet for NFT":M&&z&&!R?L?"Initializing Blockchain...":"Blockchain Not Ready":M&&z&&R?"Create NFT Todo":"Add Todo"})]})]}):(0,i.jsx)("div",{className:"flex justify-center py-4",children:(0,i.jsx)("div",{className:"w-6 h-6 rounded-full border-2 border-ocean-light border-t-ocean-deep animate-spin"})})}var u=s(74162),h=function(e){let{children:t,fallback:s,requireSuiClient:n=!1}=e,[r,l]=(0,a.useState)(!1),o=(0,u.N)();(0,a.useEffect)(()=>{l(!0)},[]);let{isAppReady:c,isSuiClientReady:d,initializationError:m}=o,h=r&&(n?c&&d:c),x=s||(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,i.jsx)("div",{className:"w-8 h-8 rounded-full border-4 border-blue-200 border-t-blue-500 animate-spin"}),(0,i.jsxs)("div",{className:"mt-3 text-center",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:r?c?"Connecting to blockchain...":"Initializing application...":"Loading..."}),r&&m&&(0,i.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:["Warning: ",m]})]})]});return(0,i.jsx)("div",{suppressHydrationWarning:!0,children:h?t:x})},x=s(7196),f=s(54780);let p=(0,f.Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),g=(0,f.Z)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);var v=s(35463);let b=(0,f.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),N=(0,f.Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),y=(0,f.Z)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);function j(){let[e,t]=(0,a.useState)(x.l.getMetrics()),[s,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{x.l.isInitialized()||x.l.init();let e=setInterval(()=>{t(x.l.getMetrics())},5e3),s=()=>n(!0),i=()=>n(!1);return window.addEventListener("online",s),window.addEventListener("offline",i),()=>{clearInterval(e),window.removeEventListener("online",s),window.removeEventListener("offline",i)}},[]);let r=e.cacheHits+e.cacheMisses>0?(e.cacheHits/(e.cacheHits+e.cacheMisses)*100).toFixed(1):"0";return(0,i.jsxs)("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-800",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-slate-100 flex items-center gap-2",children:[(0,i.jsx)(p,{className:"w-5 h-5 text-sky-500"}),"PWA Metrics"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm ".concat(s?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:[s?(0,i.jsx)(g,{className:"w-4 h-4"}):(0,i.jsx)(v.Z,{className:"w-4 h-4"}),s?"Online":"Offline"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[(0,i.jsx)(b,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"text-sm",children:"Install"})]}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Prompts Shown"}),(0,i.jsx)("span",{className:"text-sm font-medium text-slate-300",children:e.installPromptShown})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Accepted"}),(0,i.jsx)("span",{className:"text-sm font-medium text-emerald-400",children:e.installAccepted})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Dismissed"}),(0,i.jsx)("span",{className:"text-sm font-medium text-slate-400",children:e.installDismissed})]})]})]}),(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[(0,i.jsx)(N,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"text-sm",children:"Notifications"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Permission"}),(0,i.jsx)("span",{className:"text-sm font-medium px-2 py-1 rounded-full ".concat("granted"===e.notificationPermission?"bg-emerald-500/20 text-emerald-400":"denied"===e.notificationPermission?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"),children:e.notificationPermission})]})]}),(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[(0,i.jsx)(v.Z,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"text-sm",children:"Offline"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Sessions"}),(0,i.jsx)("span",{className:"text-sm font-medium text-slate-300",children:e.offlineUsage})]})]}),(0,i.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 col-span-2 sm:col-span-3",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-slate-400 mb-3",children:[(0,i.jsx)(y,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"text-sm",children:"Cache Performance"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Hits"}),(0,i.jsx)("p",{className:"text-lg font-medium text-emerald-400",children:e.cacheHits})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Misses"}),(0,i.jsx)("p",{className:"text-lg font-medium text-red-400",children:e.cacheMisses})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-xs text-slate-500",children:"Hit Rate"}),(0,i.jsxs)("p",{className:"text-lg font-medium text-slate-300",children:[r,"%"]})]})]}),(0,i.jsx)("div",{className:"mt-3 h-2 bg-slate-700 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:"h-full bg-gradient-to-r from-sky-500 to-indigo-600 transition-all duration-500",style:{width:"".concat(r,"%")}})})]})]}),(0,i.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,i.jsx)("button",{onClick:()=>x.l.clearNFTCache(),className:"text-xs bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-1.5 rounded-lg transition-colors",children:"Clear NFT Cache"}),(0,i.jsx)("button",{onClick:()=>x.l.requestNotificationPermission(),className:"text-xs bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-1.5 rounded-lg transition-colors",disabled:"granted"===e.notificationPermission,children:"Enable Notifications"}),(0,i.jsx)("button",{onClick:()=>{x.l.registerSync("sync-todos"),x.l.registerSync("sync-nfts")},className:"text-xs bg-slate-800 hover:bg-slate-700 text-slate-300 px-3 py-1.5 rounded-lg transition-colors",children:"Force Sync"})]})]})}function w(){let[e,t]=(0,a.useState)("default"),[s,o]=(0,a.useState)(0),[c,d]=(0,a.useState)(["default"]),[u,x]=(0,a.useState)(!1),[f,p]=(0,a.useState)(""),[g,v]=(0,a.useState)(!1),b=(0,r.tN)(),N=(null==b?void 0:b.address)||null;(0,a.useEffect)(()=>(v(!0),()=>{v(!1)}),[]),(0,a.useEffect)(()=>{if(!g)return;let e=(0,l.cA)(N||void 0);d(e.length>0?e:["default"])},[N,s,g]);let y=()=>{f.trim()&&((0,l.qv)(f.trim(),N||void 0)?(o(e=>e+1),t(f.trim()),p(""),x(!1)):alert("Failed to create list. List name might already exist."))},w=s=>{if("default"===s){alert("Cannot delete the default list");return}confirm('Are you sure you want to delete the "'.concat(s,'" list? This will delete all todos in it.'))&&((0,l.VU)(s,N||void 0)?(o(e=>e+1),e===s&&t("default")):alert("Failed to delete list"))};return g?(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-4 text-ocean-deep dark:text-ocean-foam",children:"Dashboard"}),(0,i.jsx)("p",{className:"text-ocean-medium dark:text-ocean-light",children:"Manage your todos across different lists"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,i.jsx)("div",{className:"md:col-span-1",children:(0,i.jsxs)("div",{className:"ocean-card h-full",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4 text-ocean-deep dark:text-ocean-foam",children:"Your Lists"}),(0,i.jsx)("ul",{className:"space-y-2",children:c.map(s=>(0,i.jsx)("li",{className:"mb-1",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("button",{className:"flex-grow text-left px-3 py-2 rounded-lg transition-colors ".concat(e===s?"bg-ocean-medium text-white font-medium":"hover:bg-ocean-light/30 dark:hover:bg-ocean-medium/30"),onClick:()=>t(s),children:s.charAt(0).toUpperCase()+s.slice(1)}),"default"!==s&&(0,i.jsx)("button",{onClick:()=>w(s),className:"p-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete list",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},s))}),(0,i.jsx)("div",{className:"mt-6",children:u?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(),placeholder:"List name...",className:"w-full px-3 py-2 border border-ocean-light dark:border-ocean-medium rounded-lg focus:ring-2 focus:ring-ocean-medium focus:border-transparent bg-white dark:bg-ocean-deep text-ocean-deep dark:text-ocean-foam",autoFocus:!0}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:y,disabled:!f.trim(),className:"flex-1 px-3 py-2 bg-ocean-medium text-white rounded-lg hover:bg-ocean-deep transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"}),(0,i.jsx)("button",{onClick:()=>{x(!1),p("")},className:"px-3 py-2 border border-ocean-light dark:border-ocean-medium rounded-lg hover:bg-ocean-light/30 dark:hover:bg-ocean-medium/30 transition-colors",children:"Cancel"})]})]}):(0,i.jsx)("button",{className:"ocean-button w-full",onClick:()=>x(!0),children:(0,i.jsx)("span",{children:"Create New List"})})})]})}),(0,i.jsxs)("div",{className:"md:col-span-3",children:[(0,i.jsxs)("div",{className:"ocean-card mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4 text-ocean-deep dark:text-ocean-foam",children:"Add New Todo"}),(0,i.jsx)(m,{listName:e,onTodoAdded:()=>{o(e=>e+1)}})]}),(0,i.jsxs)("div",{className:"ocean-card",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsxs)("h2",{className:"text-xl font-semibold text-ocean-deep dark:text-ocean-foam",children:[e.charAt(0).toUpperCase()+e.slice(1)," ","List"]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("button",{className:"px-3 py-1 text-sm bg-ocean-light/50 dark:bg-ocean-medium/50 rounded-lg hover:bg-ocean-light dark:hover:bg-ocean-medium transition-colors",children:"All"}),(0,i.jsx)("button",{className:"px-3 py-1 text-sm bg-ocean-light/30 dark:bg-ocean-medium/30 rounded-lg hover:bg-ocean-light dark:hover:bg-ocean-medium transition-colors",children:"Pending"}),(0,i.jsx)("button",{className:"px-3 py-1 text-sm bg-ocean-light/30 dark:bg-ocean-medium/30 rounded-lg hover:bg-ocean-light dark:hover:bg-ocean-medium transition-colors",children:"Completed"})]})]}),(0,i.jsx)(h,{requireSuiClient:!0,children:(0,i.jsx)(n.Z,{listName:e},"".concat(e,"-").concat(s))})]}),(0,i.jsxs)("div",{className:"ocean-card mt-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4 text-ocean-deep dark:text-ocean-foam",children:"PWA Status"}),(0,i.jsx)(j,{})]})]})]})]}):(0,i.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,i.jsx)("div",{className:"flex justify-center py-12",children:(0,i.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-ocean-light border-t-ocean-deep animate-spin"})})})}},74162:function(e,t,s){"use strict";s.d(t,{N:function(){return l},q:function(){return o}});var i=s(29754),a=s(22585);let n={isClientReady:!1,isSuiClientReady:!1,isAppReady:!1,initializationError:null},r=(0,a.createContext)(n),l=()=>(0,a.useContext)(r)||n;function o(e){let{children:t}=e,[s,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=setTimeout(()=>{u(!0),n(!0),o(!0)},0);return()=>clearTimeout(e)},[]),(0,i.jsx)(r.Provider,{value:{isClientReady:s,isSuiClientReady:l,isAppReady:s&&l&&m,initializationError:c},children:t})}},59295:function(e,t,s){"use strict";s.d(t,{n:function(){return n}});var i=s(22585),a=s(19132);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"testnet",[t,s]=(0,i.useState)(!1),[n,r]=(0,i.useState)(!1),[l,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{c&&!m&&(0,a.isSuiClientInitialized)()&&(s(!0),u(!0))},[c,m]);let h=(0,i.useCallback)(async()=>{if(c&&!n){if(t||(0,a.isSuiClientInitialized)()){t||s(!0);return}r(!0),o(null),u(!0);try{if(await (0,a.sP)(e),(0,a.isSuiClientInitialized)())c&&s(!0);else throw Error("Client initialization completed but verification failed")}catch(t){let e=t instanceof Error?t.message:"Failed to initialize Sui client";c&&(o(e),console.error("[useSuiClient] Initialization failed:",t))}finally{c&&r(!1)}}},[e,n,t,c]),x=(0,i.useCallback)(async()=>{if(!c)return null;try{if((0,a.isSuiClientInitialized)()||(console.warn("[useSuiClient] Client not available, attempting to initialize..."),await h(),(0,a.isSuiClientInitialized)()))return await (0,a.tx)();throw Error("Client still not available after initialization")}catch(e){return console.error("[useSuiClient] Failed to get client:",e),o(e instanceof Error?e.message:"Failed to get client"),null}},[h,c]);return(0,i.useEffect)(()=>(d(!0),()=>{d(!1)}),[]),(0,i.useEffect)(()=>{if(c&&!m&&!t){let e=setTimeout(()=>{h()},100);return()=>clearTimeout(e)}},[c,m,t,h]),{isInitialized:t,isInitializing:n,error:l,initialize:h,getClient:x}}},7196:function(e,t,s){"use strict";s.d(t,{l:function(){return r}});let i=null;Promise.resolve().then(s.bind(s,82265)).then(e=>{i=e.toast});class a{isInitialized(){return this.initialized}async init(){if(!this.initialized){if(this.initialized=!0,this.loadMetrics(),"serviceWorker"in navigator)try{this.swRegistration=await navigator.serviceWorker.register("/service-worker.js"),this.swRegistration.addEventListener("updatefound",()=>{let e=this.swRegistration.installing;e&&e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&this.showUpdatePrompt()})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}catch(e){console.error("[PWA] Service Worker registration failed:",e)}window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.metrics.installPromptShown++,this.saveMetrics()}),window.addEventListener("appinstalled",()=>{this.deferredPrompt=null,i&&i.success("WalTodo installed successfully!")}),window.addEventListener("online",()=>{i&&i.success("Back online! Syncing data..."),this.syncOfflineData()}),window.addEventListener("offline",()=>{i&&i("You're offline. Changes will sync when reconnected.",{icon:"ℹ️"}),this.metrics.offlineUsage++,this.saveMetrics()}),"Notification"in window&&(this.metrics.notificationPermission=Notification.permission,this.saveMetrics())}}async showInstallPrompt(){if(!this.deferredPrompt)return!1;try{await this.deferredPrompt.prompt();let{outcome:e}=await this.deferredPrompt.userChoice;return"accepted"===e?this.metrics.installAccepted++:this.metrics.installDismissed++,this.saveMetrics(),this.deferredPrompt=null,"accepted"===e}catch(e){return console.error("[PWA] Install prompt error:",e),!1}}canInstall(){return null!==this.deferredPrompt}isInstalled(){if("undefined"==typeof navigator)return!1;let e=window.matchMedia("(display-mode: standalone)").matches;/iPad|iPhone|iPod/.test(navigator.userAgent);let t=!0===window.navigator.standalone;return e||t}async requestNotificationPermission(){if(!("Notification"in window))return"denied";if("default"===Notification.permission){let e=await Notification.requestPermission();return this.metrics.notificationPermission=e,this.saveMetrics(),e}return Notification.permission}async sendNotification(e,t){"Notification"in window&&"granted"===Notification.permission&&this.swRegistration&&await this.swRegistration.showNotification(e,{icon:"/icons/icon-192x192.png",badge:"/icons/badge-72x72.png",...t})}async cacheNFTImage(e){var t;"undefined"!=typeof navigator&&this.swRegistration&&(null===(t=navigator.serviceWorker)||void 0===t?void 0:t.controller)&&navigator.serviceWorker.controller.postMessage({type:"CACHE_NFT",url:e})}async clearNFTCache(){var e;"undefined"!=typeof navigator&&this.swRegistration&&(null===(e=navigator.serviceWorker)||void 0===e?void 0:e.controller)&&navigator.serviceWorker.controller.postMessage({type:"CLEAR_NFT_CACHE"})}async registerSync(e){if(this.swRegistration&&"sync"in this.swRegistration)try{await this.swRegistration.sync.register(e)}catch(e){console.error("[PWA] Sync registration failed:",e)}}async registerPeriodicSync(e,t){if(this.swRegistration&&"periodicSync"in this.swRegistration)try{await this.swRegistration.periodicSync.register(e,{minInterval:t})}catch(e){console.error("[PWA] Periodic sync registration failed:",e)}}async share(e){if("undefined"==typeof navigator||!navigator.share)return!1;try{return await navigator.share(e),!0}catch(e){return"AbortError"!==e.name&&console.error("[PWA] Share failed:",e),!1}}canShare(e){return"undefined"!=typeof navigator&&!!navigator.share&&(!e||!("canShare"in navigator)||"function"!=typeof navigator.canShare||navigator.canShare(e))}getMetrics(){return{...this.metrics}}trackCacheHit(){this.metrics.cacheHits++,this.saveMetrics()}trackCacheMiss(){this.metrics.cacheMisses++,this.saveMetrics()}showUpdatePrompt(){i&&(i("A new version of WalTodo is available.",{duration:1/0,position:"bottom-center",icon:"\uD83D\uDD04",style:{borderRadius:"10px",background:"#333",color:"#fff"}}),setTimeout(()=>{this.updateServiceWorker()},1e4))}updateServiceWorker(){this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage({type:"SKIP_WAITING"})}async syncOfflineData(){await this.registerSync("sync-todos"),await this.registerSync("sync-nfts")}loadMetrics(){if("undefined"!=typeof localStorage)try{let e=localStorage.getItem("pwa-metrics");e&&(this.metrics={...this.metrics,...JSON.parse(e)})}catch(e){console.error("[PWA] Failed to load metrics:",e)}}saveMetrics(){if("undefined"!=typeof localStorage)try{localStorage.setItem("pwa-metrics",JSON.stringify(this.metrics))}catch(e){console.error("[PWA] Failed to save metrics:",e)}}constructor(){this.deferredPrompt=null,this.swRegistration=null,this.metrics={installPromptShown:0,installAccepted:0,installDismissed:0,notificationPermission:"default",offlineUsage:0,cacheHits:0,cacheMisses:0},this.initialized=!1}}let n=null,r=n=new a}},function(e){e.O(0,[6168,9431,2265,5604,1705,6229,2196,8436,2090,9499,2391,1744],function(){return e(e.s=62623)}),_N_E=e.O()}]);