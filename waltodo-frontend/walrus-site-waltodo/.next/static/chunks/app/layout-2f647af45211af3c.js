(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{94233:function(e,t,r){Promise.resolve().then(r.bind(r,65173)),Promise.resolve().then(r.t.bind(r,81157,23))},65173:function(e,t,r){"use strict";r.d(t,{ClientProviders:function(){return q}});var s=r(29754),a=r(22585),i=r(91549),n=r(67616),o=r(65609),l=r(63226),c=r(80686),u=class extends c.l{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){let s=t.queryKey,a=t.queryHash??(0,n.Rm)(s,t),i=this.get(a);return i||(i=new o.A({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){l.Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n._x)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,n._x)(e,t)):t}notify(e){l.Vr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){l.Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){l.Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},h=r(20509),d=class extends c.l{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#r=new Map,this.#s=0}#t;#r;#s;build(e,t,r){let s=new h.m({mutationCache:this,mutationId:++this.#s,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){this.#t.add(e);let t=f(e);if("string"==typeof t){let r=this.#r.get(t);r?r.push(e):this.#r.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){let t=f(e);if("string"==typeof t){let r=this.#r.get(t);if(r){if(r.length>1){let t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#r.delete(t)}}}this.notify({type:"removed",mutation:e})}canRun(e){let t=f(e);if("string"!=typeof t)return!0;{let r=this.#r.get(t),s=r?.find(e=>"pending"===e.state.status);return!s||s===e}}runNext(e){let t=f(e);if("string"!=typeof t)return Promise.resolve();{let r=this.#r.get(t)?.find(t=>t!==e&&t.state.isPaused);return r?.continue()??Promise.resolve()}}clear(){l.Vr.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#r.clear()})}getAll(){return Array.from(this.#t)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n.X7)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,n.X7)(e,t))}notify(e){l.Vr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return l.Vr.batch(()=>Promise.all(e.map(e=>e.continue().catch(n.ZT))))}};function f(e){return e.options.scope?.id}var m=r(32074),p=r(82967),g=r(51684),y=class{#a;#i;#n;#o;#l;#c;#u;#h;constructor(e={}){this.#a=e.queryCache||new u,this.#i=e.mutationCache||new d,this.#n=e.defaultOptions||{},this.#o=new Map,this.#l=new Map,this.#c=0}mount(){this.#c++,1===this.#c&&(this.#u=m.j.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#a.onFocus())}),this.#h=p.N.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#a.onOnline())}))}unmount(){this.#c--,0===this.#c&&(this.#u?.(),this.#u=void 0,this.#h?.(),this.#h=void 0)}isFetching(e){return this.#a.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#a.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),r=this.#a.build(this,t),s=r.state.data;return void 0===s?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime((0,n.KC)(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#a.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){let s=this.defaultQueryOptions({queryKey:e}),a=this.#a.get(s.queryHash),i=a?.state.data,o=(0,n.SE)(t,i);if(void 0!==o)return this.#a.build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return l.Vr.batch(()=>this.#a.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#a.get(t.queryHash)?.state}removeQueries(e){let t=this.#a;l.Vr.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let r=this.#a;return l.Vr.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let r={revert:!0,...t};return Promise.all(l.Vr.batch(()=>this.#a.findAll(e).map(e=>e.cancel(r)))).then(n.ZT).catch(n.ZT)}invalidateQueries(e,t={}){return l.Vr.batch(()=>(this.#a.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let r={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(l.Vr.batch(()=>this.#a.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(n.ZT)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(n.ZT)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let r=this.#a.build(this,t);return r.isStaleByTime((0,n.KC)(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(n.ZT).catch(n.ZT)}fetchInfiniteQuery(e){return e.behavior=(0,g.Gm)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(n.ZT).catch(n.ZT)}ensureInfiniteQueryData(e){return e.behavior=(0,g.Gm)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return p.N.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#a}getMutationCache(){return this.#i}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#o.set((0,n.Ym)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#o.values()],r={};return t.forEach(t=>{(0,n.to)(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){this.#l.set((0,n.Ym)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#l.values()],r={};return t.forEach(t=>{(0,n.to)(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,n.Rm)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===n.CN&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#a.clear(),this.#i.clear()}};let b=new y({defaultOptions:{queries:{retry:(e,t)=>{var r;return(null==t||null===(r=t.message)||void 0===r||!r.includes("4"))&&e<3},staleTime:3e4,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchInterval:!1,enabled:!0},mutations:{retry:1,onError:e=>{console.error("Mutation error:",e)}}}});function w(e){let{children:t}=e;return(0,a.useEffect)(()=>()=>{},[]),(0,s.jsxs)(i.aH,{client:b,children:[t,!1]})}var v=r(73084);class x extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("".concat(this.props.providerName," provider error:"),e,t)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,s.jsx)("div",{className:"text-orange-600 mb-4",children:(0,s.jsx)("svg",{className:"h-16 w-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:[this.props.providerName," Initialization Failed"]}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["There was an issue setting up the ",this.props.providerName.toLowerCase(),". This might be due to network connectivity or browser compatibility."]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Suggested fixes:"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,s.jsx)("li",{children:"• Check your internet connection"}),(0,s.jsx)("li",{children:"• Refresh the page"}),(0,s.jsx)("li",{children:"• Try a different browser"}),(0,s.jsx)("li",{children:"• Disable browser extensions"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"}),(0,s.jsx)("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}var k=r(82265);function S(){return(0,s.jsx)(k.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",borderRadius:"8px",padding:"16px",fontSize:"14px"},success:{style:{background:"#10b981"},iconTheme:{primary:"#fff",secondary:"#10b981"}},error:{style:{background:"#ef4444"},iconTheme:{primary:"#fff",secondary:"#ef4444"},duration:6e3},loading:{style:{background:"#6366f1"}}}})}var E=r(26168),C=r(21202),T=r(4799);function N(e){let{message:t="Loading...",size:r="md",fullScreen:a=!1}=e;return(0,s.jsx)("div",{className:a?"min-h-screen bg-gray-50 flex items-center justify-center":"flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-blue-600 mx-auto mb-4 ".concat({sm:"h-6 w-6",md:"h-8 w-8",lg:"h-12 w-12"}[r])}),(0,s.jsx)("p",{className:"text-gray-600 ".concat({sm:"text-sm",md:"text-base",lg:"text-lg"}[r]),children:t})]})})}let{networkConfig:O}=(0,E.mB)({testnet:{url:(0,C.I)("testnet")},devnet:{url:(0,C.I)("devnet")},mainnet:{url:(0,C.I)("mainnet")}}),j=new y({defaultOptions:{queries:{retry:3,staleTime:3e4,gcTime:3e5,refetchOnWindowFocus:!0},mutations:{retry:1}}});function P(e){let{children:t,defaultNetwork:r="testnet",autoConnect:n=!0,enableNetworkSwitching:o=!0,enableSlushWallet:l=!0}=e,[c,u]=a.useState(!1);return(!function(){try{let e=(0,T.Gg)();e.slushWallet,e.connectivity,e.networkSwitching}catch(e){return console.warn("Failed to load network configuration, using defaults:",e),{slushWallet:{enabled:!0,autoConnect:!0,networkSwitchingEnabled:!0,features:["transaction_signing","account_management","network_switching"],supportedNetworks:["testnet","devnet"]},connectivity:{timeout:1e4,retryAttempts:3},networkSwitching:{enabled:!0}}}}(),a.useEffect(()=>{u(!0)},[]),c)?(0,s.jsx)(i.aH,{client:j,children:(0,s.jsx)(E.MS,{networks:O,defaultNetwork:r,children:(0,s.jsx)(E.nS,{autoConnect:n,storageKey:"sui-wallet-kit",preferredWallets:["Slush Wallet"],walletFilter:e=>["Slush Wallet","Sui Wallet","Martian","Suiet","Ethos","Glass"].some(t=>e.name.toLowerCase().includes(t.toLowerCase())),children:t})})}):(0,s.jsx)(N,{message:"Initializing wallet...",size:"md",fullScreen:!0})}var D=r(74162);function q(e){let{children:t}=e,[r,i]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{i(!0)},[]),r)?(0,s.jsx)("div",{suppressHydrationWarning:!0,children:(0,s.jsx)(v.S,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,s.jsx)("div",{className:"text-red-600 mb-4",children:(0,s.jsx)("svg",{className:"h-16 w-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L3.314 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"There was an error loading the application. Please refresh the page."}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"})]})}),children:(0,s.jsx)(D.q,{children:(0,s.jsx)(x,{providerName:"Query Client",children:(0,s.jsx)(w,{children:(0,s.jsx)(x,{providerName:"Sui Wallet",children:(0,s.jsx)(P,{defaultNetwork:"testnet",autoConnect:!0,enableNetworkSwitching:!0,enableSlushWallet:!0,children:(0,s.jsx)(x,{providerName:"Toast",children:(0,s.jsx)(S,{children:t})})})})})})})})}):(0,s.jsx)("div",{suppressHydrationWarning:!0,children:t})}},4799:function(e,t,r){"use strict";r.d(t,{Gg:function(){return o}});var s=r(32608);let a={mainnet:{network:{name:"mainnet",url:"https://fullnode.mainnet.sui.io:443",faucetUrl:"https://faucet.mainnet.sui.io",explorerUrl:"https://suiexplorer.com",websocketUrl:"wss://fullnode.mainnet.sui.io:443",fallbackUrls:["https://sui-mainnet-endpoint.blockvision.org/v1","https://sui-mainnet.publicnode.com","https://mainnet.sui.rpcpool.com"],chainId:"35834a8a"},walrus:{packageId:"0xfdc88f7d7cf30afab2f82e8380d11ee8f70efb90e863d1de8616fae1bb09ea77",networkUrl:"https://wal.mainnet.sui.io",publisherUrl:"https://publisher.walrus.site",aggregatorUrl:"https://aggregator.walrus.site",apiPrefix:"https://api.walrus.tech/1.0",fallbackPublisherUrls:["https://walrus-mainnet-publisher.nodes.guru","https://walrus-mainnet-publisher.blockscope.net"]},slushWallet:{enabled:!0,autoConnect:!0,features:["transaction_signing","account_management","network_switching"],supportedNetworks:["mainnet","testnet"],networkSwitchingEnabled:!0},deployment:{packageId:"0x26eb7ee8688da02c5f671679524e379f0b837a12f1d1d799f255b7eea260ad27",digest:"unknown",timestamp:"2025-06-01T00:00:00.000Z",deployerAddress:"0xca793690985183dc8e2180fd059d76f3b0644f5c2ecd3b01cdebe7d40b0cca39"},contracts:{todoNft:{packageId:"0x26eb7ee8688da02c5f671679524e379f0b837a12f1d1d799f255b7eea260ad27",moduleName:"todo_nft",structName:"TodoNFT"}},features:{aiEnabled:!0,blockchainVerification:!0,encryptedStorage:!1,networkSwitching:!0,automaticRetry:!0,fallbackEndpoints:!0},networkSwitching:{enabled:!0,supportedNetworks:["mainnet","testnet"],autoDetectNetwork:!0,confirmationRequired:!0},connectivity:{timeout:1e4,retryAttempts:3,retryDelay:1e3,healthCheckInterval:3e4}},testnet:{network:{name:"testnet",url:"https://fullnode.testnet.sui.io:443",faucetUrl:"https://faucet.testnet.sui.io",explorerUrl:"https://testnet.suiexplorer.com",websocketUrl:"wss://fullnode.testnet.sui.io:443",fallbackUrls:["https://sui-testnet-endpoint.blockvision.org/v1","https://sui-testnet.publicnode.com","https://testnet.sui.rpcpool.com"],chainId:"4c78adac"},walrus:{packageId:"0xd84704c17fc870b8764832c535aa6b11f21a95cd6f5bb38a9b07d2cf42220c66",networkUrl:"https://wal.testnet.sui.io",publisherUrl:"https://publisher-testnet.walrus.site",aggregatorUrl:"https://aggregator-testnet.walrus.site",apiPrefix:"https://api-testnet.walrus.tech/1.0",fallbackPublisherUrls:["https://walrus-testnet-publisher.nodes.guru","https://walrus-testnet-publisher.blockscope.net"]},slushWallet:{enabled:!0,autoConnect:!0,features:["transaction_signing","account_management","network_switching"],supportedNetworks:["testnet","devnet"],networkSwitchingEnabled:!0},deployment:{packageId:"0x9a679ea2ab90d62abf6ffe20e52942222c858c3e4a87ad0cfeb8104877d5dd32",digest:"unknown",timestamp:"2025-05-30T00:00:00.000Z",deployerAddress:"0xca793690985183dc8e2180fd059d76f3b0644f5c2ecd3b01cdebe7d40b0cca39"},contracts:{todoNft:{packageId:"0x9a679ea2ab90d62abf6ffe20e52942222c858c3e4a87ad0cfeb8104877d5dd32",moduleName:"todo_nft",structName:"TodoNFT"}},features:{aiEnabled:!0,blockchainVerification:!0,encryptedStorage:!1,networkSwitching:!0,automaticRetry:!0,fallbackEndpoints:!0},networkSwitching:{enabled:!0,supportedNetworks:["testnet","devnet"],autoDetectNetwork:!0,confirmationRequired:!0},connectivity:{timeout:1e4,retryAttempts:3,retryDelay:1e3,healthCheckInterval:3e4}},devnet:{network:{name:"devnet",url:"https://fullnode.devnet.sui.io:443",faucet:"https://faucet.devnet.sui.io/gas"},walrus:{publisherUrl:"https://publisher-devnet.walrus.space",aggregatorUrl:"https://aggregator-devnet.walrus.space",storeEndpoint:"https://walrus-testnet-api.nodes.guru",epochs:5,maxBlobSize:13631488},contracts:{packageId:"0xf99aee9f21493e1590e7e5a9aea6f343a1f381031a04a732724871fc294be799",upgradeCapId:"0x456...",adminCapId:"0x789..."},connectivity:{timeout:3e4,retries:3,backoff:1e3},features:{enableWalrusStorage:!0,enableNFTCreation:!0,enableOfflineMode:!0,enableAnalytics:!1},ui:{name:"Walrus Todo (Devnet)",description:"Decentralized Todo App on Sui Devnet with Walrus Storage",networkBadge:"DEVNET",supportedWallets:["Sui Wallet","Suiet","Ethos","Glasseater","OneKey"]},slushWallet:{enabled:!0,chainId:"sui:devnet",rpcUrl:"https://fullnode.devnet.sui.io:443"},networkSwitching:{enabled:!0,supportedNetworks:["devnet","testnet"]}}},i=["mainnet","testnet","devnet"];function n(e){return i.includes(e)}function o(){return function(e){let t=a[e];if(!t)throw Error("Configuration not found for network: ".concat(e));return t}(function(){try{let e=localStorage.getItem("walrus-todo-network");return e&&n(e)?e:null}catch(e){return console.warn("Failed to read persisted network:",e),null}}()||function(){let e=function(){let e=s.env.NEXT_PUBLIC_NETWORK;if(e&&n(e))return e;s.env.VERCEL;let t=window.location.hostname;return(t.includes("walrus-todo.")||t.includes("waltodo."))&&!t.includes("test")?"mainnet":(t.includes("test")||t.includes("staging"),"testnet")}();return n(e)?e:"testnet"}())}},74162:function(e,t,r){"use strict";r.d(t,{N:function(){return o},q:function(){return l}});var s=r(29754),a=r(22585);let i={isClientReady:!1,isSuiClientReady:!1,isAppReady:!1,initializationError:null},n=(0,a.createContext)(i),o=()=>(0,a.useContext)(n)||i;function l(e){let{children:t}=e,[r,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[h,d]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=setTimeout(()=>{d(!0),i(!0),l(!0)},0);return()=>clearTimeout(e)},[]),(0,s.jsx)(n.Provider,{value:{isClientReady:r,isSuiClientReady:o,isAppReady:r&&o&&h,initializationError:c},children:t})}},27680:function(e,t,r){"use strict";r.d(t,{IH:function(){return o},co:function(){return l}});let s="waltodo_analytics",a={enabled:!0,maxStorageSize:5242880,retentionDays:30,samplingRate:1,debug:!1};class i{initialize(e){this.initialized||(this.config={...a,...e},this.initialized=!0,this.cleanOldData(),this.flushTimer=setInterval(()=>this.flush(),3e4),this.trackPagePerformance(),this.setupErrorTracking(),this.trackVisibilityChanges(),this.config.debug)}trackPerformance(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ms",s=arguments.length>3?arguments[3]:void 0;if(!this.shouldTrack())return;let a={name:e,value:t,unit:r,timestamp:Date.now(),metadata:s};this.data.performance.push(a),this.trimMetrics("performance",1e3),this.config.debug}trackError(e,t){if(!this.shouldTrack())return;let r="string"==typeof e?e:e.message,s=this.data.errors.find(e=>e.message===r);if(s)s.count++,s.timestamp=Date.now();else{let s={type:"string"==typeof e?"custom":e.name||"Error",message:r,stack:"object"==typeof e?e.stack:void 0,timestamp:Date.now(),context:t,count:1};this.data.errors.push(s),this.trimMetrics("errors",100)}this.config.debug&&console.error("[Analytics] Error tracked:",e)}trackUser(e,t,r,s){if(!this.shouldTrack())return;let a={action:e,category:t,value:r,timestamp:Date.now(),metadata:s};this.data.user.push(a),this.trimMetrics("user",500),this.config.debug}trackWallet(e){if(!this.shouldTrack())return;let t={...e,timestamp:Date.now()};this.data.wallet.push(t),this.trimMetrics("wallet",200),this.config.debug}trackTransaction(e){if(!this.shouldTrack())return;let t={...e,timestamp:Date.now()};this.data.transactions.push(t),this.trimMetrics("transactions",200),this.config.debug}trackStorage(e){if(!this.shouldTrack())return;let t={...e,timestamp:Date.now()};this.data.storage.push(t),this.trimMetrics("storage",200),this.config.debug}startTiming(e){let t=performance.now();return()=>{let r=performance.now()-t;this.trackPerformance(e,r,"ms")}}getSummary(){let e=Date.now()-this.data.session.startTime;return{session:{id:this.data.session.id,duration:e,startTime:this.data.session.startTime,lastActive:this.data.session.lastActive},performance:{count:this.data.performance.length,averageLoadTime:this.getAverageMetric("performance","page-load"),averageApiTime:this.getAverageMetric("performance","api-call")},errors:{total:this.data.errors.reduce((e,t)=>e+t.count,0),unique:this.data.errors.length,recent:this.data.errors.slice(-10)},user:{actions:this.data.user.length,categories:this.groupByCategory(this.data.user)},wallet:{connections:this.countWalletActions("connect"),transactions:this.data.transactions.length,successRate:this.getSuccessRate("transactions")},storage:{operations:this.data.storage.length,successRate:this.getSuccessRate("storage"),totalUploaded:this.getTotalStorageSize("upload"),totalDownloaded:this.getTotalStorageSize("download")}}}clear(){this.data=this.createEmptyData(),this.flush(),this.config.debug}export(){return JSON.stringify(this.data,null,2)}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flush(),this.initialized=!1}generateSessionId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}createEmptyData(){return{performance:[],errors:[],user:[],wallet:[],transactions:[],storage:[],session:{id:this.sessionId,startTime:Date.now(),lastActive:Date.now()}}}loadData(){if("undefined"==typeof localStorage)return this.createEmptyData();try{let e=localStorage.getItem(s);if(e){let t=JSON.parse(e);return t.session.id=this.sessionId,t.session.lastActive=Date.now(),t}}catch(e){console.error("[Analytics] Failed to load data:",e)}return this.createEmptyData()}flush(){if("undefined"!=typeof localStorage)try{JSON.stringify(this.data).length>this.config.maxStorageSize&&this.trimAllMetrics(),localStorage.setItem(s,JSON.stringify(this.data)),this.data.session.lastActive=Date.now()}catch(e){if(console.error("[Analytics] Failed to save data:",e),e instanceof DOMException&&"QuotaExceededError"===e.name){this.trimAllMetrics(.5);try{localStorage.setItem(s,JSON.stringify(this.data))}catch(e){this.clear()}}}}shouldTrack(){return!!this.initialized&&!!this.config.enabled&&(!(this.config.samplingRate<1)||Math.random()<this.config.samplingRate)}cleanOldData(){let e=Date.now()-864e5*this.config.retentionDays;Object.keys(this.data).forEach(t=>{Array.isArray(this.data[t])&&(this.data[t]=this.data[t].filter(t=>t.timestamp>e))})}trimMetrics(e,t){let r=this.data[e];Array.isArray(r)&&r.length>t&&(this.data[e]=r.slice(-t))}trimAllMetrics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.8;Object.entries({performance:1e3,errors:100,user:500,wallet:200,transactions:200,storage:200}).forEach(t=>{let[r,s]=t;this.trimMetrics(r,Math.floor(s*e))})}trackPagePerformance(){if(window.addEventListener("load",()=>{let e=performance.getEntriesByType("navigation")[0];e&&this.trackPerformance("page-load",e.loadEventEnd-e.fetchStart,"ms",{domContentLoaded:e.domContentLoadedEventEnd-e.fetchStart,domInteractive:e.domInteractive-e.fetchStart})}),"PerformanceObserver"in window)try{new PerformanceObserver(e=>{let t=e.getEntries(),r=t[t.length-1];this.trackPerformance("lcp",r.renderTime||r.loadTime,"ms")}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.trackPerformance("fid",e.processingStart-e.startTime,"ms")})}).observe({entryTypes:["first-input"]});let e=0;new PerformanceObserver(t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(e+=t.value)}),this.trackPerformance("cls",e,"count")}).observe({entryTypes:["layout-shift"]})}catch(e){console.error("[Analytics] Failed to set up performance observers:",e)}}setupErrorTracking(){window.addEventListener("error",e=>{this.trackError(e.error||e.message,{filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{this.trackError("Unhandled Promise Rejection: ".concat(e.reason),{promise:!0})})}trackVisibilityChanges(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",()=>{this.trackUser(document.hidden?"page-hidden":"page-visible","navigation")})}getAverageMetric(e,t){let r=this.data[e].filter(e=>e.name===t);return 0===r.length?0:r.reduce((e,t)=>e+t.value,0)/r.length}groupByCategory(e){return e.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+1,e),{})}countWalletActions(e){return this.data.wallet.filter(t=>t.action===e).length}getSuccessRate(e){let t=this.data[e];return 0===t.length?0:t.filter(e=>e.success).length/t.length*100}getTotalStorageSize(e){return this.data.storage.filter(t=>t.action===e&&t.size).reduce((e,t)=>e+(t.size||0),0)}constructor(){this.initialized=!1,this.config=a,this.sessionId=this.generateSessionId(),this.data=this.loadData()}}let n=null;function o(){return n||(n=new i),n}let l=new i},81157:function(){},51684:function(e,t,r){"use strict";r.d(t,{Gm:function(){return a},Qy:function(){return o},ZF:function(){return l}});var s=r(67616);function a(e){return{onFetch:(t,r)=>{let a=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],c=t.state.data?.pageParams||[],u={pages:[],pageParams:[]},h=0,d=async()=>{let r=!1,d=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)})},f=(0,s.cG)(t.options,t.fetchOptions),m=async(e,a,i)=>{if(r)return Promise.reject();if(null==a&&e.pages.length)return Promise.resolve(e);let n={client:t.client,queryKey:t.queryKey,pageParam:a,direction:i?"backward":"forward",meta:t.options.meta};d(n);let o=await f(n),{maxPages:l}=t.options,c=i?s.Ht:s.VX;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,a,l)}};if(o&&l.length){let e="backward"===o,t={pages:l,pageParams:c},r=(e?n:i)(a,t);u=await m(t,r,e)}else{let t=e??l.length;do{let e=0===h?c[0]??a.initialPageParam:i(a,u);if(h>0&&null==e)break;u=await m(u,e),h++}while(h<t)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function i(e,{pages:t,pageParams:r}){let s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function n(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function o(e,t){return!!t&&null!=i(e,t)}function l(e,t){return!!t&&!!e.getPreviousPageParam&&null!=n(e,t)}}},function(e){e.O(0,[7272,6168,2265,3084,9499,2391,1744],function(){return e(e.s=94233)}),_N_E=e.O()}]);