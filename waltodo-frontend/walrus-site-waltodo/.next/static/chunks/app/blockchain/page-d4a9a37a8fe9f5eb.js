(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6266],{57944:function(e,t,s){Promise.resolve().then(s.bind(s,39865))},54780:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(22585);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:d="",children:u,iconNode:m,...h}=e;return(0,a.createElement)("svg",{ref:t,...c,width:i,height:i,stroke:s,strokeWidth:n?24*Number(r)/Number(i):r,className:l("lucide",d),...!u&&!o(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:o,...c}=s;return(0,a.createElement)(d,{ref:r,iconNode:t,className:l("lucide-".concat(i(n(e))),"lucide-".concat(e),o),...c})});return s.displayName=n(e),s}},35463:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(54780).Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},6581:function(e,t,s){"use strict";var a=s(27564);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},39865:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(29754),i=s(22585),r=s(59183),n=s(6229),l=s(82265);function o(e){var t;let{onSubmit:s,loading:r}=e,[n,o]=(0,i.useState)({title:"",description:"",priority:"medium",dueDate:void 0,tags:[]}),[c,d]=(0,i.useState)({}),u=()=>{let e={};return n.title.trim()?n.title.length>100&&(e.title="Title must be 100 characters or less"):e.title="Title is required",n.description.length>500&&(e.description="Description must be 500 characters or less"),d(e),0===Object.keys(e).length},m=async e=>{if(e.preventDefault(),u())try{await s(n),o({title:"",description:"",priority:"medium",dueDate:void 0,tags:[]}),d({}),l.default.success("TodoNFT created successfully!",{duration:3e3,icon:"\uD83C\uDF89"})}catch(t){console.error("Create todo error:",t);let e=t instanceof Error?t.message:"Failed to create TodoNFT";l.default.error(e,{duration:5e3})}};return(0,a.jsxs)("form",{onSubmit:m,className:"bg-white p-6 rounded-lg shadow-md space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create TodoNFT"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,a.jsx)("input",{type:"text",id:"title",value:n.title,onChange:e=>o(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(c.title?"border-red-500":"border-gray-300"),placeholder:"Enter todo title",disabled:r}),c.title&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c.title})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",value:n.description,onChange:e=>o(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical ".concat(c.description?"border-red-500":"border-gray-300"),placeholder:"Enter todo description",rows:3,disabled:r}),c.description&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,a.jsxs)("select",{id:"priority",value:n.priority||"medium",onChange:e=>o(t=>({...t,priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:r,children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,a.jsx)("input",{type:"date",id:"dueDate",value:"string"==typeof n.dueDate?n.dueDate:n.dueDate instanceof Date?n.dueDate.toISOString().split("T")[0]:"",onChange:e=>o(t=>({...t,dueDate:e.target.value||void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:r})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),(0,a.jsx)("input",{type:"text",id:"tags",value:(null===(t=n.tags)||void 0===t?void 0:t.join(", "))||"",onChange:e=>o(t=>({...t,tags:e.target.value.split(",").map(e=>e.trim()).filter(e=>e.length>0)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"work, urgent, blockchain",disabled:r})]}),(0,a.jsx)("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Creating...":"Create TodoNFT"})]})}function c(e){let{todo:t,onUpdate:s,onComplete:n,onDelete:o,loading:c}=e,[d,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)({title:t.title,description:t.description||""}),{executeOperation:x,loading:g}=(0,r.u6)(),p=async()=>{t.objectId&&await x(async()=>(await s({objectId:t.objectId,title:m.title,description:m.description}),u(!1),{success:!0}))},f=async()=>{t.objectId&&await x(async()=>(await n(t.objectId),{success:!0}))},b=async()=>{t.objectId&&window.confirm("Are you sure you want to delete this TodoNFT?")&&await x(async()=>(await o(t.objectId),l.default.success("TodoNFT deleted successfully!",{duration:3e3,icon:"\uD83D\uDDD1️"}),{success:!0}))},v=c||g;return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md border-l-4 ".concat(t.completed?"border-green-500 bg-green-50":"border-blue-500"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[d?(0,a.jsx)("input",{type:"text",value:m.title,onChange:e=>h(t=>({...t,title:e.target.value})),className:"text-lg font-semibold bg-transparent border-b border-gray-300 focus:outline-none focus:border-blue-500 flex-1 mr-2",disabled:v}):(0,a.jsx)("h4",{className:"text-lg font-semibold ".concat(t.completed?"line-through text-gray-500":"text-gray-900"),children:t.title}),(0,a.jsx)("div",{className:"flex space-x-2",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:p,disabled:v,className:"text-green-600 hover:text-green-800 disabled:opacity-50",children:"Save"}),(0,a.jsx)("button",{onClick:()=>u(!1),disabled:v,className:"text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Cancel"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>u(!0),disabled:v||t.completed,className:"text-blue-600 hover:text-blue-800 disabled:opacity-50",children:"Edit"}),!t.completed&&(0,a.jsx)("button",{onClick:f,disabled:v,className:"text-green-600 hover:text-green-800 disabled:opacity-50",children:"Complete"}),(0,a.jsx)("button",{onClick:b,disabled:v,className:"text-red-600 hover:text-red-800 disabled:opacity-50",children:"Delete"})]})})]}),d?(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)("textarea",{value:m.description,onChange:e=>h(t=>({...t,description:e.target.value})),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 resize-vertical",placeholder:"Description",rows:2,disabled:v})}):(0,a.jsxs)(a.Fragment,{children:[t.description&&(0,a.jsx)("p",{className:"text-gray-600 mb-2 ".concat(t.completed?"line-through":""),children:t.description}),(0,a.jsx)("div",{className:"flex justify-between items-center text-sm text-gray-500",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"mr-4",children:["Object ID: ",t.objectId]}),t.createdAt&&(0,a.jsxs)("span",{children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]})})]})]})}function d(e){let{currentNetwork:t,onSwitch:s,disabled:i}=e;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Network:"}),(0,a.jsx)("select",{value:t,onChange:e=>s(e.target.value),disabled:i,className:"px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[{value:"mainnet",label:"Mainnet"},{value:"testnet",label:"Testnet"},{value:"devnet",label:"Devnet"},{value:"localnet",label:"Local"}].map(e=>{let{value:t,label:s}=e;return(0,a.jsx)("option",{value:t,children:s},t)})})]})}function u(){let[e,t]=(0,i.useState)(!1),s=(0,n.tN)(),l=(null==s?void 0:s.connected)||!1,u=(null==s?void 0:s.connecting)||!1,h=(null==s?void 0:s.address)||null,{state:x,actions:g,network:p,isWalletReady:f}=(0,r.h6)(),[b,v]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{t(!0)},[]),e)?l||u?u?(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-blue-800 mb-2",children:"Connecting Wallet..."}),(0,a.jsx)("p",{className:"text-blue-700",children:"Please check your wallet and approve the connection."})]})}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"TodoNFT Manager"}),(0,a.jsx)(d,{currentNetwork:p,onSwitch:g.switchToNetwork,disabled:x.loading})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsxs)("p",{children:["Connected:"," ",(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:h})]}),(0,a.jsxs)("p",{children:["Network: ",p," ",x.networkHealth?"✅":"❌"]})]}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)("button",{onClick:()=>v(!b),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:b?"Hide Form":"Create TodoNFT"}),(0,a.jsx)("button",{onClick:g.refreshTodos,disabled:x.refreshing,className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 disabled:opacity-50 transition-colors",children:x.refreshing?"Refreshing...":"Refresh"})]})]})]}),x.error&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-red-700",children:x.error})]}),(0,a.jsx)("button",{onClick:g.clearError,className:"text-red-600 hover:text-red-800",children:"Dismiss"})]})}),b&&(0,a.jsx)(o,{onSubmit:async e=>{await g.createTodo({title:e.title,description:e.description,priority:"medium",dueDate:void 0})},loading:x.loading}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Your TodoNFTs (",x.todos.length,")"]}),x.loading&&0===x.todos.length?(0,a.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your TodoNFTs..."})}):0===x.todos.length?(0,a.jsx)("div",{className:"bg-gray-50 p-8 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"No TodoNFTs found. Create your first TodoNFT to get started!"})}):(0,a.jsx)("div",{className:"space-y-4",children:x.todos.map(e=>(0,a.jsx)(c,{todo:e,onUpdate:async e=>{await g.updateTodo(e)},onComplete:async e=>{await g.completeTodo(e)},onDelete:async e=>{await g.deleteTodo(e)},loading:x.loading},e.objectId))})]})]}):(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-yellow-800 mb-2",children:"Wallet Connection Required"}),(0,a.jsx)("p",{className:"text-yellow-700",children:"Please connect your wallet to manage TodoNFTs on the Sui blockchain."})]})}):(0,a.jsx)(m,{})}function m(){return(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-gray-200 border-t-blue-600 animate-spin"}),(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500 animate-pulse",children:"Initializing blockchain manager..."})})]})})})}var h=s(7196);function x(){let[e,t]=(0,i.useState)(!1),[s,a]=(0,i.useState)(!1),[r,n]=(0,i.useState)(!0),[l,o]=(0,i.useState)(h.l.getMetrics());(0,i.useEffect)(()=>{h.l.init(),t(!1),a(h.l.isInstalled()),n(navigator.onLine);let e=setInterval(()=>{o(h.l.getMetrics())},5e3),s=()=>n(!0),i=()=>n(!1);window.addEventListener("online",s),window.addEventListener("offline",i);let r=()=>{a(h.l.isInstalled()),t(!1)};return window.addEventListener("appinstalled",r),()=>{clearInterval(e),window.removeEventListener("online",s),window.removeEventListener("offline",i),window.removeEventListener("appinstalled",r)}},[]);let c=(0,i.useCallback)(async()=>!1,[]),d=(0,i.useCallback)(async()=>await h.l.requestNotificationPermission(),[]),u=(0,i.useCallback)(async(e,t)=>{await h.l.sendNotification(e,t)},[]),m=(0,i.useCallback)(async e=>{await h.l.cacheNFTImage(e)},[]),x=(0,i.useCallback)(async()=>{await h.l.clearNFTCache()},[]),g=(0,i.useCallback)(async e=>await h.l.share(e),[]);return{canInstall:e,isInstalled:s,isOnline:r,metrics:l,install:c,requestNotificationPermission:d,sendNotification:u,cacheNFTImage:m,clearNFTCache:x,share:g,canShare:(0,i.useCallback)(e=>h.l.canShare(e),[]),registerSync:(0,i.useCallback)(async e=>{await h.l.registerSync(e)},[]),registerPeriodicSync:(0,i.useCallback)(async(e,t)=>{await h.l.registerPeriodicSync(e,t)},[])}}var g=s(57391),p=s(54780);let f=(0,p.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var b=s(35463);let v=(0,p.Z)("image-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);function y(){let{isOnline:e,cacheNFTImage:t}=x(),[s,r]=(0,i.useState)([]),[n,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=localStorage.getItem("cached-nfts");e&&r(JSON.parse(e))}catch(e){console.error("Failed to load cached NFTs:",e)}finally{l(!1)}},c=async()=>{if(!e){alert("Cannot refresh while offline");return}l(!0),l(!1)};return n?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)(f,{className:"w-8 h-8 animate-spin text-sky-500"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[!e&&(0,a.jsxs)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 flex items-center gap-3",children:[(0,a.jsx)(b.Z,{className:"w-5 h-5 text-amber-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-amber-200 font-medium",children:"You're offline"}),(0,a.jsx)("p",{className:"text-amber-300 text-sm",children:"Showing cached NFTs. New NFTs will appear when you're back online."})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(t=>(0,a.jsxs)("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-sky-500/50 transition-all",children:[(0,a.jsxs)("div",{className:"aspect-square relative bg-slate-900",children:[t.imageUrl?(0,a.jsx)(g.default,{src:t.imageUrl,alt:t.name,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",onError:e=>{var t;e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}):null,(0,a.jsx)("div",{className:"hidden absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(v,{className:"w-12 h-12 text-slate-600"})}),!e&&(0,a.jsx)("div",{className:"absolute top-2 right-2 bg-slate-900/80 backdrop-blur-sm rounded-full p-2",children:(0,a.jsx)(b.Z,{className:"w-4 h-4 text-amber-500"})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-100",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-slate-400 line-clamp-2",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,a.jsxs)("span",{children:["Cached ",new Date(t.cachedAt).toLocaleDateString()]}),t.todoId&&(0,a.jsx)("span",{className:"bg-sky-500/20 text-sky-400 px-2 py-1 rounded-full",children:"Task NFT"})]})]})]},t.id))}),0===s.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(v,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No cached NFTs"}),(0,a.jsx)("p",{className:"text-slate-500 mb-4",children:e?"Refresh to cache your NFTs for offline viewing":"Connect to the internet to cache NFTs"}),e&&(0,a.jsx)("button",{onClick:c,className:"bg-sky-500 hover:bg-sky-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Cache NFTs"})]}),s.length>0&&e&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("button",{onClick:c,disabled:n,className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-300 px-4 py-2 rounded-lg transition-colors disabled:opacity-50",children:[(0,a.jsx)(f,{className:"w-4 h-4 ".concat(n?"animate-spin":"")}),"Refresh Cache"]})})]})}var w=s(6581);function N(){let e=(0,n.tN)(),t=(null==e?void 0:e.connected)||!1,s=(null==e?void 0:e.connecting)||!1,o=(null==e?void 0:e.account)||null,c=(null==e?void 0:e.connect)||(()=>{}),{state:d,network:m,isWalletReady:h}=(0,r.h6)(),[g,p]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1),{isOnline:v}=x(),N=(0,w.useSearchParams)();return(0,i.useEffect)(()=>{let e=N.get("action"),t=N.get("shared"),s=N.get("title");"create-nft"===e&&"true"===t&&l.toast.success("Ready to create NFT from shared content: ".concat(s))},[N]),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4 text-ocean-deep dark:text-ocean-foam",children:"Blockchain Todos"}),(0,a.jsx)("p",{className:"text-ocean-medium dark:text-ocean-light",children:"Create, manage, and transfer your TodoNFTs on the Sui blockchain"})]}),(0,a.jsx)(()=>t?(0,a.jsx)("div",{className:"ocean-card mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-ocean-deep dark:text-ocean-foam mb-2",children:"Wallet Connected"}),(0,a.jsxs)("p",{className:"text-sm text-ocean-medium dark:text-ocean-light",children:["Address:"," ",(0,a.jsx)("code",{className:"bg-white/20 px-2 py-1 rounded text-xs",children:null==o?void 0:o.address})]}),(0,a.jsxs)("p",{className:"text-sm text-ocean-medium dark:text-ocean-light",children:["Network: ",m," ",d.networkHealth?"✅":"⚠️"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>p(!g),className:"ocean-button text-sm",children:g?"Simple View":"Advanced Manager"}),(0,a.jsxs)("button",{onClick:()=>b(!f),className:"ocean-button text-sm",children:[f?"Hide":"Show"," Offline Gallery"]})]})]})}):(0,a.jsx)("div",{className:"ocean-card mb-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto text-ocean-medium",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-ocean-deep dark:text-ocean-foam mb-2",children:"Connect Your Wallet"}),(0,a.jsx)("p",{className:"text-ocean-medium dark:text-ocean-light mb-6 max-w-md mx-auto",children:"Connect your Sui wallet to create, manage, and transfer TodoNFTs on the blockchain."}),(0,a.jsx)("button",{onClick:c,disabled:s,className:"ocean-button inline-flex items-center gap-2",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border-2 border-white border-t-transparent animate-spin"}),"Connecting..."]}):"Connect Wallet"})]})}),{}),t&&(0,a.jsxs)(a.Fragment,{children:[g?(0,a.jsx)(u,{}):(0,a.jsx)("div",{className:"ocean-card",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-ocean-deep dark:text-ocean-foam mb-2",children:"Simple Todo View"}),(0,a.jsx)("p",{className:"text-ocean-medium dark:text-ocean-light mb-6 max-w-md mx-auto",children:"Switch to Advanced Manager to create and manage TodoNFTs."}),(0,a.jsx)("button",{onClick:()=>p(!0),className:"ocean-button",children:"Open Advanced Manager"})]})}),f&&(0,a.jsxs)("div",{className:"ocean-card mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-ocean-deep dark:text-ocean-foam",children:v?"NFT Gallery":"Offline NFT Gallery"}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(v?"bg-emerald-500/20 text-emerald-600":"bg-amber-500/20 text-amber-600"),children:v?"\uD83D\uDFE2 Online":"\uD83D\uDFE1 Offline"})]}),(0,a.jsx)(y,{})]})]})]})}function j(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{className:"ocean-background min-h-screen"}),children:(0,a.jsx)(N,{})})}},7196:function(e,t,s){"use strict";s.d(t,{l:function(){return n}});let a=null;Promise.resolve().then(s.bind(s,82265)).then(e=>{a=e.toast});class i{isInitialized(){return this.initialized}async init(){if(!this.initialized){if(this.initialized=!0,this.loadMetrics(),"serviceWorker"in navigator)try{this.swRegistration=await navigator.serviceWorker.register("/service-worker.js"),this.swRegistration.addEventListener("updatefound",()=>{let e=this.swRegistration.installing;e&&e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&this.showUpdatePrompt()})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}catch(e){console.error("[PWA] Service Worker registration failed:",e)}window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,this.metrics.installPromptShown++,this.saveMetrics()}),window.addEventListener("appinstalled",()=>{this.deferredPrompt=null,a&&a.success("WalTodo installed successfully!")}),window.addEventListener("online",()=>{a&&a.success("Back online! Syncing data..."),this.syncOfflineData()}),window.addEventListener("offline",()=>{a&&a("You're offline. Changes will sync when reconnected.",{icon:"ℹ️"}),this.metrics.offlineUsage++,this.saveMetrics()}),"Notification"in window&&(this.metrics.notificationPermission=Notification.permission,this.saveMetrics())}}async showInstallPrompt(){if(!this.deferredPrompt)return!1;try{await this.deferredPrompt.prompt();let{outcome:e}=await this.deferredPrompt.userChoice;return"accepted"===e?this.metrics.installAccepted++:this.metrics.installDismissed++,this.saveMetrics(),this.deferredPrompt=null,"accepted"===e}catch(e){return console.error("[PWA] Install prompt error:",e),!1}}canInstall(){return null!==this.deferredPrompt}isInstalled(){if("undefined"==typeof navigator)return!1;let e=window.matchMedia("(display-mode: standalone)").matches;/iPad|iPhone|iPod/.test(navigator.userAgent);let t=!0===window.navigator.standalone;return e||t}async requestNotificationPermission(){if(!("Notification"in window))return"denied";if("default"===Notification.permission){let e=await Notification.requestPermission();return this.metrics.notificationPermission=e,this.saveMetrics(),e}return Notification.permission}async sendNotification(e,t){"Notification"in window&&"granted"===Notification.permission&&this.swRegistration&&await this.swRegistration.showNotification(e,{icon:"/icons/icon-192x192.png",badge:"/icons/badge-72x72.png",...t})}async cacheNFTImage(e){var t;"undefined"!=typeof navigator&&this.swRegistration&&(null===(t=navigator.serviceWorker)||void 0===t?void 0:t.controller)&&navigator.serviceWorker.controller.postMessage({type:"CACHE_NFT",url:e})}async clearNFTCache(){var e;"undefined"!=typeof navigator&&this.swRegistration&&(null===(e=navigator.serviceWorker)||void 0===e?void 0:e.controller)&&navigator.serviceWorker.controller.postMessage({type:"CLEAR_NFT_CACHE"})}async registerSync(e){if(this.swRegistration&&"sync"in this.swRegistration)try{await this.swRegistration.sync.register(e)}catch(e){console.error("[PWA] Sync registration failed:",e)}}async registerPeriodicSync(e,t){if(this.swRegistration&&"periodicSync"in this.swRegistration)try{await this.swRegistration.periodicSync.register(e,{minInterval:t})}catch(e){console.error("[PWA] Periodic sync registration failed:",e)}}async share(e){if("undefined"==typeof navigator||!navigator.share)return!1;try{return await navigator.share(e),!0}catch(e){return"AbortError"!==e.name&&console.error("[PWA] Share failed:",e),!1}}canShare(e){return"undefined"!=typeof navigator&&!!navigator.share&&(!e||!("canShare"in navigator)||"function"!=typeof navigator.canShare||navigator.canShare(e))}getMetrics(){return{...this.metrics}}trackCacheHit(){this.metrics.cacheHits++,this.saveMetrics()}trackCacheMiss(){this.metrics.cacheMisses++,this.saveMetrics()}showUpdatePrompt(){a&&(a("A new version of WalTodo is available.",{duration:1/0,position:"bottom-center",icon:"\uD83D\uDD04",style:{borderRadius:"10px",background:"#333",color:"#fff"}}),setTimeout(()=>{this.updateServiceWorker()},1e4))}updateServiceWorker(){this.swRegistration&&this.swRegistration.waiting&&this.swRegistration.waiting.postMessage({type:"SKIP_WAITING"})}async syncOfflineData(){await this.registerSync("sync-todos"),await this.registerSync("sync-nfts")}loadMetrics(){if("undefined"!=typeof localStorage)try{let e=localStorage.getItem("pwa-metrics");e&&(this.metrics={...this.metrics,...JSON.parse(e)})}catch(e){console.error("[PWA] Failed to load metrics:",e)}}saveMetrics(){if("undefined"!=typeof localStorage)try{localStorage.setItem("pwa-metrics",JSON.stringify(this.metrics))}catch(e){console.error("[PWA] Failed to save metrics:",e)}}constructor(){this.deferredPrompt=null,this.swRegistration=null,this.metrics={installPromptShown:0,installAccepted:0,installDismissed:0,notificationPermission:"default",offlineUsage:0,cacheHits:0,cacheMisses:0},this.initialized=!1}}let r=null,n=r=new i}},function(e){e.O(0,[6168,9431,2265,1705,6229,8436,9183,9499,2391,1744],function(){return e(e.s=57944)}),_N_E=e.O()}]);