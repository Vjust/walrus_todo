"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6229],{4799:function(e,t,n){n.d(t,{Gg:function(){return s}});var r=n(32608);let a={mainnet:{network:{name:"mainnet",url:"https://fullnode.mainnet.sui.io:443",faucetUrl:"https://faucet.mainnet.sui.io",explorerUrl:"https://suiexplorer.com",websocketUrl:"wss://fullnode.mainnet.sui.io:443",fallbackUrls:["https://sui-mainnet-endpoint.blockvision.org/v1","https://sui-mainnet.publicnode.com","https://mainnet.sui.rpcpool.com"],chainId:"35834a8a"},walrus:{packageId:"0xfdc88f7d7cf30afab2f82e8380d11ee8f70efb90e863d1de8616fae1bb09ea77",networkUrl:"https://wal.mainnet.sui.io",publisherUrl:"https://publisher.walrus.site",aggregatorUrl:"https://aggregator.walrus.site",apiPrefix:"https://api.walrus.tech/1.0",fallbackPublisherUrls:["https://walrus-mainnet-publisher.nodes.guru","https://walrus-mainnet-publisher.blockscope.net"]},slushWallet:{enabled:!0,autoConnect:!0,features:["transaction_signing","account_management","network_switching"],supportedNetworks:["mainnet","testnet"],networkSwitchingEnabled:!0},deployment:{packageId:"0x26eb7ee8688da02c5f671679524e379f0b837a12f1d1d799f255b7eea260ad27",digest:"unknown",timestamp:"2025-06-01T00:00:00.000Z",deployerAddress:"0xca793690985183dc8e2180fd059d76f3b0644f5c2ecd3b01cdebe7d40b0cca39"},contracts:{todoNft:{packageId:"0x26eb7ee8688da02c5f671679524e379f0b837a12f1d1d799f255b7eea260ad27",moduleName:"todo_nft",structName:"TodoNFT"}},features:{aiEnabled:!0,blockchainVerification:!0,encryptedStorage:!1,networkSwitching:!0,automaticRetry:!0,fallbackEndpoints:!0},networkSwitching:{enabled:!0,supportedNetworks:["mainnet","testnet"],autoDetectNetwork:!0,confirmationRequired:!0},connectivity:{timeout:1e4,retryAttempts:3,retryDelay:1e3,healthCheckInterval:3e4}},testnet:{network:{name:"testnet",url:"https://fullnode.testnet.sui.io:443",faucetUrl:"https://faucet.testnet.sui.io",explorerUrl:"https://testnet.suiexplorer.com",websocketUrl:"wss://fullnode.testnet.sui.io:443",fallbackUrls:["https://sui-testnet-endpoint.blockvision.org/v1","https://sui-testnet.publicnode.com","https://testnet.sui.rpcpool.com"],chainId:"4c78adac"},walrus:{packageId:"0xd84704c17fc870b8764832c535aa6b11f21a95cd6f5bb38a9b07d2cf42220c66",networkUrl:"https://wal.testnet.sui.io",publisherUrl:"https://publisher-testnet.walrus.site",aggregatorUrl:"https://aggregator-testnet.walrus.site",apiPrefix:"https://api-testnet.walrus.tech/1.0",fallbackPublisherUrls:["https://walrus-testnet-publisher.nodes.guru","https://walrus-testnet-publisher.blockscope.net"]},slushWallet:{enabled:!0,autoConnect:!0,features:["transaction_signing","account_management","network_switching"],supportedNetworks:["testnet","devnet"],networkSwitchingEnabled:!0},deployment:{packageId:"0x9a679ea2ab90d62abf6ffe20e52942222c858c3e4a87ad0cfeb8104877d5dd32",digest:"unknown",timestamp:"2025-05-30T00:00:00.000Z",deployerAddress:"0xca793690985183dc8e2180fd059d76f3b0644f5c2ecd3b01cdebe7d40b0cca39"},contracts:{todoNft:{packageId:"0x9a679ea2ab90d62abf6ffe20e52942222c858c3e4a87ad0cfeb8104877d5dd32",moduleName:"todo_nft",structName:"TodoNFT"}},features:{aiEnabled:!0,blockchainVerification:!0,encryptedStorage:!1,networkSwitching:!0,automaticRetry:!0,fallbackEndpoints:!0},networkSwitching:{enabled:!0,supportedNetworks:["testnet","devnet"],autoDetectNetwork:!0,confirmationRequired:!0},connectivity:{timeout:1e4,retryAttempts:3,retryDelay:1e3,healthCheckInterval:3e4}},devnet:{network:{name:"devnet",url:"https://fullnode.devnet.sui.io:443",faucet:"https://faucet.devnet.sui.io/gas"},walrus:{publisherUrl:"https://publisher-devnet.walrus.space",aggregatorUrl:"https://aggregator-devnet.walrus.space",storeEndpoint:"https://walrus-testnet-api.nodes.guru",epochs:5,maxBlobSize:13631488},contracts:{packageId:"0xf99aee9f21493e1590e7e5a9aea6f343a1f381031a04a732724871fc294be799",upgradeCapId:"0x456...",adminCapId:"0x789..."},connectivity:{timeout:3e4,retries:3,backoff:1e3},features:{enableWalrusStorage:!0,enableNFTCreation:!0,enableOfflineMode:!0,enableAnalytics:!1},ui:{name:"Walrus Todo (Devnet)",description:"Decentralized Todo App on Sui Devnet with Walrus Storage",networkBadge:"DEVNET",supportedWallets:["Sui Wallet","Suiet","Ethos","Glasseater","OneKey"]},slushWallet:{enabled:!0,chainId:"sui:devnet",rpcUrl:"https://fullnode.devnet.sui.io:443"},networkSwitching:{enabled:!0,supportedNetworks:["devnet","testnet"]}}},o=["mainnet","testnet","devnet"];function i(e){return o.includes(e)}function s(){return function(e){let t=a[e];if(!t)throw Error("Configuration not found for network: ".concat(e));return t}(function(){try{let e=localStorage.getItem("walrus-todo-network");return e&&i(e)?e:null}catch(e){return console.warn("Failed to read persisted network:",e),null}}()||function(){let e=function(){let e=r.env.NEXT_PUBLIC_NETWORK;if(e&&i(e))return e;r.env.VERCEL;let t=window.location.hostname;return(t.includes("walrus-todo.")||t.includes("waltodo."))&&!t.includes("test")?"mainnet":(t.includes("test")||t.includes("staging"),"testnet")}();return i(e)?e:"testnet"}())}},6229:function(e,t,n){n.d(t,{tN:function(){return i}}),n(29754);var r=n(22585);n(26168),n(19132),n(4799);let a=(0,r.createContext)(null),o=()=>({connected:!1,connecting:!1,account:null,address:null,chainId:null,name:null,network:"testnet",connect:()=>{"undefined"!=typeof console&&console.warn&&console.warn("[WalletContext] Connect called before initialization")},disconnect:()=>Promise.resolve(),signAndExecuteTransaction:()=>Promise.reject(Error("Wallet not initialized")),trackTransaction:()=>Promise.reject(Error("Wallet not initialized")),sessionExpired:!1,resetSession:()=>{},lastActivity:0,resetActivityTimer:()=>{},transactionHistory:[],transactions:[],addTransaction:()=>{},currentNetwork:"testnet",switchNetwork:()=>{},error:null,clearError:()=>{},setError:()=>{},isModalOpen:!1,openModal:()=>{},closeModal:()=>{}}),i=()=>(0,r.useContext)(a)||o()},19132:function(e,t,n){n.d(t,{completeTodoOnBlockchain:function(){return O},deleteTodoOnBlockchain:function(){return D},$6:function(){return _},tx:function(){return E},a7:function(){return I},xe:function(){return S},sP:function(){return y},isSuiClientInitialized:function(){return T},ZR:function(){return U},storeTodoOnBlockchain:function(){return A},updateTodoOnBlockchain:function(){return x},wi:function(){return C}});var r=n(21433),a=n(2960),o=n(79619),i=n(25288);let s={aggregatorUrl:"https://walrus-testnet-aggregator.nodes.guru",publisherUrl:"https://walrus-testnet-publisher.nodes.guru",cacheTimeoutMs:3e5},c=new Map;function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={...s,...t},r="".concat(e,":").concat(n.aggregatorUrl),a=c.get(r);if(a&&Date.now()-a.timestamp<n.cacheTimeoutMs)return a.url;let o=e.trim().replace(/^0x/,""),i="".concat(n.aggregatorUrl,"/v1/").concat(o);return c.set(r,{url:i,timestamp:Date.now()}),i}let u={PACKAGE_ID:"0xe8d420d723b6813d1e001d8cba0dfc8613cbc814dedb4adcd41909f2e11daa8b",MODULE_NAME:"todo_nft",STRUCT_NAME:"TodoNFT"},d=new Map;class f extends Error{constructor(e,t){super(e),this.code=t,this.name="SuiClientError"}}class p extends f{constructor(){super("Wallet not connected","WALLET_NOT_CONNECTED"),this.name="WalletNotConnectedError"}}let h=null,w="testnet",g=null,m=null,b=!1,v=0;async function k(){return m||(h&&b?h:m=(async()=>{try{return w=(g=await (0,i.qn)()).network.name,h=new r.u({url:g.network.url}),b=!0,v=0,h}catch(e){throw setTimeout(()=>{m=null},1e3),e}})())}async function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"testnet";if(m)return m;if(h&&b&&w===e)return h;try{return await k()}catch(t){return m=(async()=>{try{return w=e,h=new r.u({url:{mainnet:"https://fullnode.mainnet.sui.io:443",testnet:"https://fullnode.testnet.sui.io:443",devnet:"https://fullnode.devnet.sui.io:443",localnet:"http://127.0.0.1:9000"}[e]}),b=!0,v=0,h}catch(e){throw setTimeout(()=>{m=null},1e3),e}})()}}async function E(){if(h&&b)return h;if(m)try{return await m}catch(e){throw e}if(v>=3)throw new f("Sui client initialization failed after ".concat(3," attempts"),"INITIALIZATION_FAILED");v++;try{return await N()}catch(e){if(v>=3)throw new f("Failed to initialize Sui client after ".concat(3," attempts: ").concat(e instanceof Error?e.message:"Unknown error"),"INITIALIZATION_FAILED");throw e}}function T(){return b&&null!==h}function I(){return{isInitialized:b,currentNetwork:w,hasClient:!!h,hasPromise:!!m,attempts:v}}async function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"testnet";return T()?h:m||y(e)}function U(){h=null,b=!1,m=null,v=0,g=null}async function C(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;for(let r=0;r<n;r++)try{let t=await E();return await e(t)}catch(e){if(t=e instanceof Error?e:Error(String(e)),r<n-1&&(t.message.includes("not initialized")||t.message.includes("initialization failed"))){U(),await new Promise(e=>setTimeout(e,1e3));continue}if(r===n-1)break}throw t}function _(){return(null==g?void 0:g.deployment.packageId)?g.deployment.packageId:u.PACKAGE_ID}async function S(e,t){var n;let r=null!==(n=null==t?void 0:t.maxRetries)&&void 0!==n?n:3,a=null;for(let n=0;n<r;n++)try{if(!e)throw new p;return await C(async n=>{let r=(await n.getOwnedObjects({owner:e,filter:{StructType:"".concat(_(),"::").concat(u.MODULE_NAME,"::").concat(u.STRUCT_NAME)},options:{showContent:!0,showOwner:!0,showType:!0}})).data.map(e=>(function(e,t){var n;if(!(null===(n=e.data)||void 0===n?void 0:n.content)||"moveObject"!==e.data.content.dataType)return null;let r=e.data.objectId;if(null==t?void 0:t.useCache){let e=d.get(r);if(e&&Date.now()-e.timestamp<3e5)return e.todo}let a=e.data.content.fields;if(!a)return null;try{let e;let n=function(e){try{if(!e||""===e)return{};return JSON.parse(e)}catch(e){return console.warn("Failed to parse metadata:",e),{}}}(a.metadata||""),o=a.image_url;if(o&&(o.startsWith("http")||(o=l(o)),null==t?void 0:t.generateThumbnails)){let t=function(e){try{let t=new URL(e).pathname.split("/"),n=t.indexOf("v1");if(-1!==n&&t.length>n+1)return t[n+1];let r=e.match(/[a-fA-F0-9]{64,}/);return r?r[0]:null}catch(e){return null}}(o)||a.image_url;t&&(e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(e,t);return{original:n,large:"".concat(n,"?size=large"),medium:"".concat(n,"?size=medium"),small:"".concat(n,"?size=small"),thumbnail:"".concat(n,"?size=thumbnail")}}(t))}let i=n.labels||[],s="medium";i.includes("urgent")||i.includes("high-priority")?s="high":i.includes("low-priority")&&(s="low");let c={id:r,objectId:r,title:a.title||"Untitled",description:a.description||"",completed:!0===a.completed,priority:s,tags:i,blockchainStored:!0,imageUrl:o,createdAt:a.created_at?new Date(parseInt(a.created_at)).toISOString():new Date().toISOString(),completedAt:a.completed_at?new Date(parseInt(a.completed_at)).toISOString():void 0,owner:a.owner,metadata:a.metadata||"",isPrivate:!0===a.is_private};return(null==t?void 0:t.useCache)&&d.set(r,{todo:c,timestamp:Date.now(),thumbnails:e}),c}catch(e){return console.error("Error transforming Sui object to Todo:",e),null}})(e,{useCache:null==t?void 0:t.useCache,generateThumbnails:null==t?void 0:t.generateThumbnails})).filter(e=>null!==e);return(null==t?void 0:t.filter)?function(e,t){return e.filter(e=>{if(void 0!==t.completed&&e.completed!==t.completed||void 0!==t.isPrivate&&e.isPrivate!==t.isPrivate)return!1;if(t.tags&&t.tags.length>0){let n=e.tags||[];if(!t.tags.some(e=>n.includes(e)))return!1}if(t.dateRange&&e.createdAt){let n=new Date(e.createdAt);if(n<t.dateRange.start||n>t.dateRange.end)return!1}if(t.searchTerm){var n,r;let a=t.searchTerm.toLowerCase(),o=e.title.toLowerCase().includes(a),i=null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(a),s=null===(r=e.tags)||void 0===r?void 0:r.some(e=>e.toLowerCase().includes(a));if(!o&&!i&&!s)return!1}return!0})}(r,t.filter):r})}catch(e){a=e instanceof Error?e:Error(String(e)),console.warn("Attempt ".concat(n+1,"/").concat(r," failed:"),a.message),n<r-1&&await new Promise(e=>setTimeout(e,1e3*Math.pow(2,n)))}if(a instanceof f)throw a;throw new f("Failed to fetch todos after ".concat(r," attempts: ").concat((null==a?void 0:a.message)||"Unknown error"))}async function A(e,t,n){try{if(!n)throw new p;let r=function(e,t){let n=new a.Y;return n.setSender(t),n.moveCall({target:"".concat(_(),"::").concat(u.MODULE_NAME,"::create_todo"),arguments:[n.pure(o.$5.string().serialize(e.title)),n.pure(o.$5.string().serialize(e.description)),n.pure(o.$5.string().serialize(e.imageUrl||"")),n.pure(o.$5.string().serialize(e.metadata||"")),n.pure(o.$5.bool().serialize(e.isPrivate||!1))]}),n}(e,n),i=await t(r);if(i.digest){let e=await C(async e=>{var t;let n=await e.getTransactionBlock({digest:i.digest,options:{showEffects:!0,showObjectChanges:!0}}),r=null===(t=n.objectChanges)||void 0===t?void 0:t.find(e=>{var t;return"created"===e.type&&(null===(t=e.objectType)||void 0===t?void 0:t.includes(u.STRUCT_NAME))});return null==r?void 0:r.objectId});return{success:!0,digest:i.digest,objectId:e}}return{success:!1,error:"Transaction failed without digest"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function x(e,t,n){try{if(!n)throw new p;let r=function(e,t){let n=new a.Y;return n.setSender(t),n.moveCall({target:"".concat(_(),"::").concat(u.MODULE_NAME,"::update_todo"),arguments:[n.object(e.objectId),n.pure(o.$5.string().serialize(e.title||"")),n.pure(o.$5.string().serialize(e.description||"")),n.pure(o.$5.string().serialize(e.imageUrl||"")),n.pure(o.$5.string().serialize(e.metadata||""))]}),n}(e,n),i=await t(r);return{success:!!i.digest,digest:i.digest,error:i.digest?void 0:"Transaction failed"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function O(e,t,n){try{if(!n)throw new p;let r=function(e,t){let n=new a.Y;return n.setSender(t),n.moveCall({target:"".concat(_(),"::").concat(u.MODULE_NAME,"::complete_todo"),arguments:[n.object(e)]}),n}(e,n),o=await t(r);return{success:!!o.digest,digest:o.digest,error:o.digest?void 0:"Transaction failed"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function D(e,t,n){try{if(!n)throw new p;let r=function(e,t){let n=new a.Y;return n.setSender(t),n.moveCall({target:"".concat(_(),"::").concat(u.MODULE_NAME,"::delete_todo"),arguments:[n.object(e)]}),n}(e,n),o=await t(r);return{success:!!o.digest,digest:o.digest,error:o.digest?void 0:"Transaction failed"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}}]);