# Sui Blockchain Integration Quick Reference\n\n*Created: January 2025*\n\nQuick reference for the comprehensive Sui blockchain integration in the WalTodo frontend.\n\n## Key Files Overview\n\n### Core Implementation\n- `src/lib/sui-client.ts` - Enhanced Sui client with full TodoNFT operations\n- `src/lib/sui-client-utils.ts` - Error handling and utility functions\n- `src/hooks/useSuiTodos.ts` - React hook for easy component integration\n- `src/components/BlockchainTodoManager.tsx` - Full-featured TodoNFT manager\n\n### Usage in Existing App\n- `src/app/blockchain/page.tsx` - Enhanced blockchain page with both simple and advanced views\n- `src/contexts/WalletContext.tsx` - Existing wallet context (already implemented)\n\n## Quick Usage Examples\n\n### 1. Basic Hook Usage\n\n```typescript\nimport { useSuiTodos } from '@/hooks/useSuiTodos';\n\nfunction MyComponent() {\n  const { state, actions, isWalletReady } = useSuiTodos();\n  \n  // Check wallet status\n  if (!isWalletReady) {\n    return <div>Please connect wallet</div>;\n  }\n  \n  // Create TodoNFT\n  const handleCreate = async () => {\n    await actions.createTodo({\n      title: 'My Todo',\n      description: 'Description',\n      imageUrl: 'https://example.com/image.jpg'\n    });\n  };\n  \n  return (\n    <div>\n      <button onClick={handleCreate}>Create Todo</button>\n      {state.todos.map(todo => (\n        <div key={todo.objectId}>{todo.title}</div>\n      ))}\n    </div>\n  );\n}\n```\n\n### 2. Direct Client Usage\n\n```typescript\nimport { \n  storeTodoOnBlockchain, \n  getTodosFromBlockchain \n} from '@/lib/sui-client';\nimport { useWallet } from '@suiet/wallet-kit';\n\nfunction DirectUsage() {\n  const { signAndExecuteTransaction, account } = useWallet();\n  \n  const createTodo = async () => {\n    const result = await storeTodoOnBlockchain(\n      {\n        title: 'Direct Todo',\n        description: 'Created directly',\n        imageUrl: 'https://example.com/image.jpg'\n      },\n      signAndExecuteTransaction\n    );\n    \n    if (result.success) {\n      console.log('Created:', result.objectId);\n    }\n  };\n  \n  const fetchTodos = async () => {\n    const todos = await getTodosFromBlockchain(account?.address);\n    console.log('Todos:', todos);\n  };\n}\n```\n\n### 3. Error Handling\n\n```typescript\nimport { \n  createTodoSafely,\n  TodoOperationError,\n  WalletNotConnectedError \n} from '@/lib/sui-client-utils';\n\ntry {\n  await createTodoSafely(params, signAndExecuteTransaction, address);\n} catch (error) {\n  if (error instanceof WalletNotConnectedError) {\n    // Handle wallet connection\n    await connectWallet();\n  } else if (error instanceof TodoOperationError) {\n    // Show user-friendly error\n    showError(error.message);\n  }\n}\n```\n\n## Key Operations\n\n### TodoNFT CRUD Operations\n\n```typescript\nconst { actions } = useSuiTodos();\n\n// Create\nconst result = await actions.createTodo({\n  title: string,\n  description: string,\n  imageUrl: string,\n  metadata?: string,\n  isPrivate?: boolean\n});\n\n// Update\nconst result = await actions.updateTodo({\n  objectId: string,\n  title?: string,\n  description?: string,\n  imageUrl?: string\n});\n\n// Complete\nconst result = await actions.completeTodo(objectId);\n\n// Delete\nconst result = await actions.deleteTodo(objectId);\n\n// Refresh list\nawait actions.refreshTodos();\n```\n\n### Network Management\n\n```typescript\nconst { actions, network } = useSuiTodos();\n\n// Switch networks\nawait actions.switchToNetwork('testnet');\nawait actions.switchToNetwork('mainnet');\nawait actions.switchToNetwork('devnet');\n\n// Check current network\nconsole.log('Current network:', network);\n```\n\n### State Management\n\n```typescript\nconst { state } = useSuiTodos();\n\n// Access state\nconst {\n  todos,          // Todo[] - List of TodoNFTs\n  loading,        // boolean - Loading state\n  error,          // string | null - Error message\n  networkHealth,  // boolean - Network status\n  refreshing      // boolean - Refreshing state\n} = state;\n```\n\n## Error Types\n\n```typescript\n// Import error types\nimport {\n  SuiClientError,           // General Sui client errors\n  TransactionError,         // Transaction-specific errors\n  WalletNotConnectedError,  // Wallet connection errors\n  TodoOperationError        // Todo operation errors\n} from '@/lib/sui-client';\n```\n\n## Configuration\n\n### Environment Variables\n\n```env\nNEXT_PUBLIC_SUI_NETWORK=testnet\nNEXT_PUBLIC_TODO_PACKAGE_ID=0x25a04efc88188231b2f9eb35310a5025c293c4211d2482fd24fe2c8e2dbc9f74\n```\n\n### Network URLs\n\n```typescript\nconst NETWORK_URLS = {\n  mainnet: 'https://fullnode.mainnet.sui.io:443',\n  testnet: 'https://fullnode.testnet.sui.io:443',\n  devnet: 'https://fullnode.devnet.sui.io:443',\n  localnet: 'http://127.0.0.1:9000'\n};\n```\n\n## Transaction Patterns\n\n### With Transaction Tracking\n\n```typescript\nconst { trackTransaction } = useWalletContext();\n\nconst result = await trackTransaction(\n  createTodoSafely(params, signAndExecuteTransaction, address),\n  'create_todo'\n);\n```\n\n### With Confirmation Waiting\n\n```typescript\nimport { waitForTransactionConfirmation } from '@/lib/sui-client-utils';\n\nconst result = await actions.createTodo(params);\n\nif (result.success && result.digest) {\n  await waitForTransactionConfirmation(result.digest);\n  console.log('Transaction confirmed!');\n}\n```\n\n### With Retry Logic\n\n```typescript\nimport { retryOperation } from '@/lib/sui-client-utils';\n\nconst result = await retryOperation(\n  () => actions.createTodo(params),\n  3,    // max retries\n  1000  // delay in ms\n);\n```\n\n## Common Patterns\n\n### Loading States\n\n```typescript\nfunction TodoComponent() {\n  const { state, actions } = useSuiTodos();\n  \n  if (state.loading) {\n    return <LoadingSpinner />;\n  }\n  \n  if (state.error) {\n    return (\n      <ErrorDisplay \n        message={state.error} \n        onRetry={actions.refreshTodos}\n        onClear={actions.clearError}\n      />\n    );\n  }\n  \n  return <TodoList todos={state.todos} />;\n}\n```\n\n### Form Validation\n\n```typescript\nimport { validateCreateTodoParams } from '@/lib/sui-client-utils';\n\nconst handleSubmit = (formData) => {\n  const errors = validateCreateTodoParams(formData);\n  \n  if (errors.length > 0) {\n    setValidationErrors(errors);\n    return;\n  }\n  \n  actions.createTodo(formData);\n};\n```\n\n### Network Health Monitoring\n\n```typescript\nconst { state, actions } = useSuiTodos();\n\n// Check health periodically\nuseEffect(() => {\n  const interval = setInterval(() => {\n    actions.checkHealth();\n  }, 30000);\n  \n  return () => clearInterval(interval);\n}, []);\n\n// Display health status\nif (!state.networkHealth) {\n  return <NetworkWarning onRetry={actions.checkHealth} />;\n}\n```\n\n## Integration Checklist\n\n- [ ] Install dependencies: `@mysten/sui`, `@suiet/wallet-kit`\n- [ ] Set up wallet provider in app layout\n- [ ] Configure environment variables\n- [ ] Import and use `useSuiTodos` hook\n- [ ] Implement error handling for wallet connection\n- [ ] Add loading states for blockchain operations\n- [ ] Test on testnet before mainnet deployment\n- [ ] Set up transaction confirmation waiting\n- [ ] Implement retry logic for failed operations\n- [ ] Add network health monitoring\n\nThis implementation provides a complete, production-ready Sui blockchain integration for TodoNFT management with comprehensive error handling and user experience considerations.\n